<!DOCTYPE html>
	<html>
		<head>
			<title>Mia's AI Manipulation Instructional Academy - AI Guide w/ Notes</title>
			<link rel="shortcut icon" href="favicon.ico">
			<link rel="stylesheet" type="text/css" href="main.css">
			<meta charset="utf-8">
			<meta name="description" content="A guide on the AI behavior in the game Fire Emblem: Heroes">
			<meta name="keywords" content="fire emblem heroes, ai">
		</head>
		
		<body>
			<header>
				<h1>
					<a><img src="Mia.png" alt="Mia" id="logo" onclick="shukumei.play()"></a>&nbsp;&nbsp;
					Mia's AI Manipulation Instructional Academy
				</h1>
			</header>
			<aside>
				<a href="index.html">Home<br></a>
				<a href="intro.html">Introduction<br></a>
				<a href="textguide.html">Plain Text Guide<br></a>
				<a href="noteguide.html">Annotated Guide<br></a>
				<a href="charts.html">Charts<br></a>
				<a href="glossary.html">Glossary<br></a>
				<a href="changelog.html">Changelog<br></a>
				<a href="JP/noteguideJP.html">日本語<br></a>
			</aside>
			<main>
				<h1 style="text-align:center">AI Guide w/ Notes</h1>

				<p>This is the annotated guide. Use the "Glossary" buttons below each step to view the pertinent glossary entry on the topic, which will provide explanations. Use the "Example" buttons below each step to view a practical example of me performing the step, with some visuals to aid you in understanding what's going on. Please note that the purpose of the examples used in this guide is not to prove the existence of any of the tiebreaker rules, but rather to illustrate some instances where the tiebreaker might be used.
				
				<br><br>Disclaimer: I don't claim this guide as the truth, but merely rules that I've determined based on my research. I am liable to mistakes, so please let me know when I've slipped up. Topics I am not 100% certain on: very rare Pass interaction, Rival Domains/Grand Conquest special rules.</p>
				
				
				
				<p class="bigger" id="step1">I. Evaluate and store turn-wide states:</p>
					<p class="tab1">A. Create Movement Order List, using these tiebreaks:</p>
						<p class="tab2" class="tooltip">1. Have assist: N > Y </p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Assist vs Assistless</h3>
								<p class="tab3">This tiebreaker only exists for movement order list creation. A unit with no assist will always perform standard movement before a unit with an assist.</p>						</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/moveorder/assist.gif">
								<p>In this example, Mia has no assist while Ike has Draw Back. Because Mia does not have an assist equipped, she will have movement priority over Ike.</p>
							</div></div></div>
						<p class="tab2" class="tooltip">2. Attack type: Melee > Ranged > Weaponless</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Melee vs Ranged</h3>
								<p class="tab3">This tiebreaker only exists for movement order list creation. A unit with a melee attack will always perform standard movement before a unit with a ranged attack. A unit with no weapon will perform standard movement after both melee and ranged attacks.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/moveorder/weapon.gif">
								<p>In this example, Mia is a melee hero, Micaiah is a ranged hero, while Zelgius has no weapon equipped. As a result, Mia will have movement priority over Micaiah, and Micaiah will have movement priority over Zelgius.</p>
							</div></div></div>
						<p class="tab2" class="tooltip">3. Distance to closest enemy: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Calculating Distance</h3>
								<p class="tab3">Calculating distance is a function that is performed for various tiebreakers, which determines the distance from unit/tile A to unit/tile B. Distance calculation is a one-way calculation, meaning the distance from A to B is not necessarily the same as the distance from B to A. This is because distance uses the movement type of the unit related to A and factors in terrain that may hinder that movement type.
								
								<br><br>When calculating distance in this guide, it is actually saying to calculate the shortest distance. So when calculating distance from A to B, find the shortest path from A to B. When constructing these paths, forests are worth 2 tiles for infantry, while trenches are worth 3 tiles for cavalry. Untraversable tiles for unit A's movement type cannot be used in the path. The distance includes the tile that B occupies. This means that it is possible for there to be no path at all if B is on a tile that is unpathable for unit A. In that case, the distance is considered "undefined." All distances that are "undefined" are considered equal for the purpose of tiebreakers. Example of distance calculation from Mia to various enemies: 
								
								<img src="images/distance.png" alt="distance calculation diagram"></p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/moveorder/distance.gif">
								<p>In thie example, Mia and Nephenee are both melee heroes with an assist equipped. Nephenee's distance to closest enemy is 5, while Mia's distance to closest enemy is 6. As such, Nephenee would have movement priority over Mia.</p>
							</div></div></div>
						<p class="tab2" class="tooltip">4. Slot order: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</h3>
								<p class="tab3">Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map you want info for.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/moveorder/slotprio.gif">
								<p>In this example, Mia and Nephenee are both melee heroes with an assist equipped. Mia and Nephenee both have a distance of 6 to their closest enemy. Mia has the lower slot number, so she will have movement priority over Nephenee.</p>
							</div></div></div>
					<p class="tab1">B. Store movement range of each unit and enemy</p>
	
						
						
				<p class="bigger" id="step2">II. Assess Threats:</p>
					<p class="tab1">A, If no units have actions, skip to <a href="#step8">Step VIII [End Turn]</a></p>
					<p class="tab1">B. For each unit with a weapon equipped, give "threatens enemy" status if at least 1 enemy is in unit's threat range</p>
					<p class="tab1">C. For each unit, give "threatened by enemy" status if unit is in at least 1 enemy's threat range</p>
					
					
					
				<p class="bigger" id="step3">III. Calculate Combat Results:</p>
					<p class="tab1">A. Create attacker list containing each unit with action that has the "threatens enemy" status; if list is empty, skip to <a href="#step6">Step VI [Evaluate Post-Combat Assists]</a></p>
					<p class="tab1">B. For each attacker in the list, populate a target list containing each enemy that can be attacked; remove each attacker with no attackble targets and if list is empty, skip to <a href="#step4">Step IV [Evaluate Pre-Combat Assists]</a></p>
					<p class="tab1">C. For each target in each list, determine the optimal tile from which to attack, using these tiebreaks:</p>
						<p class="tab2">1. Defense tile: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Defense Tiles</h3>
								<p>Assuming all else is equal, defense tiles have priority over tiles without defense tiles when choosing position.</p> 
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackpos/deftile.gif">
								<p>In this example, Titania can attack the Axe Fighter from the left or from below. Because the tile below is a defense tile, it will have priority. As such, Titania would prefer to attack the Axe Fighter from below.</p>
							</div></div></div>
						<p class="tab2">2. Enemy threat: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Enemy Threat</h3>
								<p>Assuming all else is equal, a tile with less enemy threat has priority over other tiles with more enemy threat. A tile is considered threatened by an enemy if it is in range of the combination of an enemy's movement+attack ranges. It is expressed this way because movement range is stored at the beginning of the turn, so if movement range were to change in the middle of the turn (e.g. Gravity staff), it would still calculate using the movement range stored at the beginning of the turn. It is also expressed this way because terrain movement limitations like walls and trees do affect which tiles can be threatened by an enemy, but transient limitations like breakable blocks, other units blocking certain tiles, or tiles blocked by obstruct have no affect. To a similar effect, enemy threat also does not seem to consider tiles that can only be threatened through a teleportation skill, because those tiles are not within the movement+attack range combination.</p> 
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackpos/enemythreat.gif">
								<p>In this example, Mia can attack the Sword Fighter from the left or from below. Because the tile from the left has only 1 enemy threatening it (the target itself), while the tile below has 2 enemies threatening it, the left tile would have priority. As such, Mia would prefer to attack the Sword Fighter from the left.</p>
							</div></div></div>
						<p class="tab2">3. Requires teleportation: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Teleportation</h3>
								<p>Assuming all else is equal, a tile that requires a teleportation to reach has priority over tiles that can be reached with standard movement. In game, these tiles are visually denoted as a lighter shade of blue when you are manually making a move. If a tile could be reached by both teleportation and by using Pivot, it is still considered a tile that requires teleportation, and Pivot will not be used if that tile is selected.
								
								<img src="images/teleportation.png" alt="teleportation tile diagram">
								
								<br>This is a table of sources of teleportation:</p>
								<table class="tab2">
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Hinoka's Spear (Special Refine)</td>
													<td>Nóatún</td>
												</tr>
												<tr>
													<td>Grimoire</td>
													<td>Fruit of Iðunn</td>
												</tr>
												<tr>
													<td>Fujin Yumi (Special Refine)</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Passives:</th>
										<td class="left">
											<table>
												<tr>
													<td>Wings of Mercy 1/2/3</td>
													<td>Escape Route 1/2/3</td>
													<td>Flier Formation 1/2/3</td>
												</tr>
												<tr>
													<td>Aerobatics 1/2/3</td>
													<td>Guidance 1/2/3</td>
													<td>Flier Guidance 1/2/3</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Other</th>
										<td class="left">
											<ul>
												<li>Rival Domains/Grand Conquest warp tiles</li>
												<li>Grand Conquest bonus Guidance effect</li>
											</ul>
										</td>
									</tr>		
								</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackpos/teleport.gif">
								<p>In this example, Zelgius has Warp Powder equipped, so he can attack the Sword Fighter from the left or from below. Because the tile on the left requires him using Warp Powder to reach it, it will have higher priority. As such, Zelgius would prefer to attack the Sword Fighter from the tile on the left.</p>
							</div></div></div>
						<p class="tab2">4. Special terrain: Flier Terrain > Forest > Trench > Regular</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Terrain</h3>
								<p>Assuming all else is equal, a tile with more prohibitive terrain has priority over other tiles. The hierarchy of special terrains is: flier terrain > forest > trench > regular. Flier terrain is any terrain that can only be accessed by flying units, whether it be water, mountains, lava, abyss, etc. Forests hinder infantry and prohibit cavalry, so they are next. Trenches only hinder cavalry, so they are the least prohibitive special terrain. Regular tiles have the least priority, of course.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackpos/terrain.gif">
								<p>In this example, Sanaki can attack the Sword Fighter from the lower left diagonal, lower right diagonal or from below. According to the terrain hierarchy, the forest on the bottom tile has higher priority than the other two diagonal tiles. As such, Sanaki would prefer to attack the Sword Fighter from the tile below.</p>
							</div></div></div>
						<p class="tab2">5. Movement required: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Movement</h3>
								<p>Assuming all else is equal, a tile that requires the lowest amount of movement to reach has priority over other tiles. The only time this is not true is for standard movement if the unit has the "shuffle" status.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackpos/lessmove.gif">
								<p>In this example, Titania can attack the Sword Fighter from above, the left, the right, and below. Because the tiles on the left and below require less movement, they have priority. The left tile has tile priority, which is explained below. As such, Titania would prefer to attack the Sword Fighter from the tile on the left.</p>
							</div></div></div>
						<p class="tab2">6. Tile priority value: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Tile Priority</h3>
								<p>Tile priority is the final tiebreaker for all situations where the AI must choose between multiple tiles. Tile priority is numbered from lowest to highest starting from the bottom left corner tile of the map, going right, and wrapping back up each row. Thus the highest priority tile is at the top right corner of the map.
								
								<img src="images/tilepriority.png" alt="tile priority diagram">
								
								<br><br>An easier way to visualize the priority relation between tiles is to remember the hierarchy of: Up > Right > Left > Down. A tile that is in a higher row than another always has priority. Between tiles in the same row, the one on the right always has priority.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackpos/tileprio.gif">
								<p>In this example, Sanaki can attack the Sword Fighter from the lower left diagonal, lower right diagonal or from below. According to tile priority, up > right > left > down. As such, Sanaki would prefer to attack the Sword Fighter from the tile on the lower right diagonal.</p>
							</div></div></div>
					<p class="tab1">D. Calculate combat result and damage ratio for each target for each attacker, based on tile selected in previous step</p>
					<div class="tab2"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
						<div class="spoiler"><div>
							<h3>Combat Result</h3>
							<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, the target that results in the best combat has priority over other targets. The three different results for combat are win, draw, and loss, whose priority is in that order. Any win is better than any draw, and any draw is better than any loss. This tiebreaker does not exist in Rival Domains or Grand Conquest, perhaps because of infinite unit spawning requiring less conservative play that usually results from this tiebreaker.</p>
							
							<h3>Damage Ratio</h3>
							<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, a target that results in a better damage ratio for the attacker has priority over other targets. Damage ratio is calculated with the following formula:
							
							<br><br>[Net Damage Dealt]*3 - [Net Damage Taken]
							
							<br><br>Net damage is the change in health; that is, the difference between the health at which the unit starts combat and ends combat. If you do more damage to a unit than it has health, only the amount of health lost will be considered net damage. This also accounts for healing that may occur mid combat due to Absorb staff or certain specials. Being dealt 10 damage, but healing 10 health from Aether afterward, would be 0 net damage. Do note that heal only counts for actual HP restored; for example if Ike has 45/45 HP, is dealt 0 damage, then activates Aether, he will not heal. As such, his net damage taken is 0. 
							
							<br><br>This formula basically values dealing damage at 3 times the rate at which damage is being taken. So dealing 9 damage and taking 27 damage has the same exact value as dealing 0 damage while taking 0 damage. In the same vein, causing the target to heal makes that target a much lower priority. Causing the enemy to heal 10 HP (-10 net damage) has the same value as doing 0 damage and taking 30 damage.</p>
						</div></div></div>

						
						
					<p class="bigger" id="step4">IV. Evaluate Pre-Combat Assists:</p>
					<p class="tab1">A. Check each unit with action with assist equipped for pre-combat eligibility and evaluate assist type using <a href="charts.html#chartA">Chart A</a></p>
					<div class="tab2"><input class="spoilerbutton" type="button" value="Show Chart" onclick="this.value=this.value=='Show Chart'?'Hide Chart':'Show Chart';">
						<div class="spoiler"><div>
							<h2>Chart A: Pre-Combat Assist User Eligibility</h2>
							<p>This chart shows the requirements for users of various assists to be eligible to perform their assist pre-combat (meaning, while attacks can still be made by anyone on the team).</p>
							<table>
								<tr>
								<thead>
									<th>Assist Type</th>
									<th>Related Assists</th>
									<th>User Eligibility</th>
								</thead>
								</tr>
								<tr>
									<th>Refresh</th>
									<td class="left">
										<table>
											<tr><td>Dance</td></tr>
											<tr><td>Sing</td></tr>
										</table>
									<td class="left">
										<ul>
											<li>Has no combat resulting in a win</li>
											<li>Has no combat in which unit does at least 5 damage</li>
										</ul>
								</tr>
								<tr>
									<th>Restore</th>
									<td class="left">
										<table>
											<tr><td>Restore</td></tr>
											<tr><td>Restore+</td></tr>
										</table>
									</td>
									<td class="left">
										<ul>
											<li>Has no combat resulting in a win</li>
											<li>If no eligible targets to remove debuffs from, behaves as a heal</li>
										</ul>
									</td>
								</tr>
								<tr>
									<th>Heal</th>
									<td class="left">
										<table>
											<tr>
												<td>Heal</td>
												<td>Mend</td>
												<td>Reconcile</td>
											</tr>
											<tr>
												<td>Physic</td>
												<td>Physic+</td>
												<td>Recover</td>
											</tr>
											<tr>
												<td>Recover+</td>
												<td>Martyr</td>
												<td>Martyr+</td>
											</tr>
											<tr>
												<td>Rehabilitate</td>
												<td>Rehabilitate+</td>
												<td>Restore</td>
											</tr>
											<tr>
												<td>Restore+</td>
												<td>Sacrifice</td>
												<td>Ardent Sacrifice</td>
											</tr>
											<tr>
												<td>Reciprocal Aid</td>
											</tr>
										</table>
									</td>
									<td class="left">
										<ul>
											<li>Has no combat resulting in a win</li>
											<li>If using Ardent Sacrifice or Reciprocal Aid, must have no weapon equipped</li>
											<li>If using Sacrifice, no combat in which unit does at least 5 damage and must not behave as a rallier</li>
											<li>If using Restore or Restore+, unit must not behave as restorer</li>
										</ul>
									</td>
								</tr>
								<tr>
									<th>Rally</th>
									<td class="left">
										<table>
											<tr>
												<td>Rally Attack</td>
												<td>Rally Speed</td>
												<td>Rally Defense</td>
											</tr>
											<tr>
												<td>Rally Resistance</td>
												<td>Rally Atk/Spd</td>
												<td>Rally Atk/Def</td>
											</tr>
											<tr>
												<td>Rally Atk/Res</td>
												<td>Rally Spd/Def</td>
												<td>Rally Spd/Res</td>
											</tr>
											<tr>
												<td>Rally Def/Res</td>
												<td>Harsh Command</td>
												<td>Sacrifice</td>
											</tr>
										</table>
									</td>
									<td class="left">
										<ul>
											<li>Has no combat resulting in a win</li>
											<li>Has no combat in which unit does at least 5 damage</li>
											<li>If using Sacrifice, if no eligible target to reverse debuffs on, behaves as a heal</li>
											<li>Must be able to heal at least the amount indicated in <a href="#chartE">Chart E</a> according to what assist is being used (may scale with target)</li>
										</ul>
									</td>
								</tr>
								<tr>
									<th>Movement Assist</th>
									<td class="left">
										<table>
											<tr>
												<td>Shove</td>
												<td>Smite</td>
											</tr>
											<tr>
												<td>Draw Back</td>
												<td>Reposition</td>
											</tr>
										</table>
									<td class="left">
										<ul>
											<li>Has at least one ally who has its action and has the "threatens enemy" status</li>
										</ul>
									</td>
								</tr>
							</table>
						</div></div></div>
					<p class="tab1">B. Create assist list with each unit that meets pre-combat eligibility from previous step; if list is empty, skip to <a href="#step5">Step V [Evaluate Attacks]</a></p>
					<p class="tab1">C. For each assister on the list, populate a target list with each ally its assist can be used on</p>
					<p class="tab1">D. Check each target's pre-combat eligibility using <a href="charts.html#chartB">Chart B</a></p>
					<div class="tab2"><input class="spoilerbutton" type="button" value="Show Chart" onclick="this.value=this.value=='Show Chart'?'Hide Chart':'Show Chart';">
						<div class="spoiler"><div>
							<h2>Chart B: Pre-Combat Assist Target Eligibility</h2>
							<p>This chart shows the requirements for targets of various assists to be eligible to receive those assists pre-combat (meaning, while attacks can still be made by anyone on the team). This chart does not include requirements according to game rules (i.e. must be missing HP to be healed), only extra rules used by the AI.</p>
							<table>
								<tr>
								<thead>
									<th>Assist Type</th>
									<th>Related Assists</th>
									<th>Target Eligibility</th>
								</thead>
								</tr>
								<tr>
									<th>Refresh</th>
									<td class="left">
										<table>
											<tr><td>Dance</td></tr>
											<tr><td>Sing</td></tr>
										</table>
									<td class="left">
										<ul>
											<li>No additional requirements</li>
										</ul>
								</tr>
								<tr>
									<th>Restore</th>
									<td class="left">
										<table>
											<tr><td>Restore</td></tr>
											<tr><td>Restore+</td></tr>
										</table>
									</td>
									<td class="left">
										<ul>
											<li>Must have a debuff status</li>
											<li>If eligible for being restored, it will not be considered a heal</li>
										</ul>
									</td>
								</tr>
								<tr>
									<th>Heal</th>
									<td class="left">
										<table>
											<tr>
												<td>Heal</td>
												<td>Mend</td>
												<td>Reconcile</td>
											</tr>
											<tr>
												<td>Physic</td>
												<td>Physic+</td>
												<td>Recover</td>
											</tr>
											<tr>
												<td>Recover+</td>
												<td>Martyr</td>
												<td>Martyr+</td>
											</tr>
											<tr>
												<td>Rehabilitate</td>
												<td>Rehabilitate+</td>
												<td>Restore</td>
											</tr>
											<tr>
												<td>Restore+</td>
												<td>Sacrifice</td>
												<td>Ardent Sacrifice</td>
											</tr>
											<tr>
												<td>Reciprocal Aid</td>
											</tr>
										</table>
									</td>
									<td class="left">
										<ul>
											<li>Is missing and can be healed by at least a certain amount of HP, according to assist being used (see <a href="#chartE">Chart E</a>)</li>
											<li>If being healed by Restore or Restore+, must not be eligible for being restored</li>
										</ul>
									</td>
								</tr>
								<tr>
									<th>Rally</th>
									<td class="left">
										<table>
											<tr>
												<td>Rally Attack</td>
												<td>Rally Speed</td>
												<td>Rally Defense</td>
											</tr>
											<tr>
												<td>Rally Resistance</td>
												<td>Rally Atk/Spd</td>
												<td>Rally Atk/Def</td>
											</tr>
											<tr>
												<td>Rally Atk/Res</td>
												<td>Rally Spd/Def</td>
												<td>Rally Spd/Res</td>
											</tr>
											<tr>
												<td>Rally Def/Res</td>
												<td>Harsh Command</td>
												<td>Sacrifice</td>
											</tr>
										</table>
									</td>
									<td class="left">
										<ul>
											<li>Has its action</li>
											<li>Has the "threatening enemy" or "threatened by enemy" status</li>
											<li>If receiving a rally skill, can be buffed by at least 2 points in one particular stat by the rally</li>
											<li>If receiving Harsh Command or Sacrifice, must have a stat debuff</li>
										</ul>
									</td>
								</tr>
								<tr>
									<th>Movement Assist</th>
									<td class="left">
										<table>
											<tr>
												<td>Shove</td>
												<td>Smite</td>
											</tr>
											<tr>
												<td>Draw Back</td>
												<td>Reposition</td>
											</tr>
										</table>
									</td>
									<td class="left">
										<ul>
											<li>Does not have its action</li>
											<li>Is adjacent to an enemy that is threatened by an ally who has its action(if at least 1 melee ally is blocked)</li>
											<li>Is 1 space away from an enemy that is threatened by an ally who has its action(if at least 1 ranged ally is blocked)</li>
										</ul>
									</td>
								</tr>
							</table>
						</div></div></div>
					<p class="tab1">E. Remove ineligible targets from each assister's target list and remove assisters with no targets from assist list; if assist list is empty, skip to <a href="#step5">Step V [Evaluate Attacks]</a></p>
					<p class="tab1">F. For each target for each assister with non-movement assist, determine the optimal tile from which to assist the target, using these tiebreaks:</p>
						<p class="tab2">1. Defense tile: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Defense Tiles</h3>
								<p>Assuming all else is equal, defense tiles have priority over tiles without defense tiles when choosing position.</p> 
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistpos/deftile.gif">
								<p>In this example, Mia can rally Nephenee from above, to the right, or from the left where she is currently standing. She rallies from above due to the defense tile as opposed to the left tile.</p>
							</div></div></div>
						<p class="tab2">2. Enemy threat: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Enemy Threat</h3>
								<p>Assuming all else is equal, a tile with less enemy threat has priority over other tiles with more enemy threat. A tile is considered threatened by an enemy if it is in range of the combination of an enemy's movement+attack ranges. It is expressed this way because movement range is stored at the beginning of the turn, so if movement range were to change in the middle of the turn (e.g. Gravity staff), it would still calculate using the movement range stored at the beginning of the turn. It is also expressed this way because terrain movement limitations like walls and trees do affect which tiles can be threatened by an enemy, but transient limitations like breakable blocks, other units blocking certain tiles, or tiles blocked by obstruct have no affect. To a similar effect, enemy threat also does not seem to consider tiles that can only be threatened through a teleportation skill, because those tiles are not within the movement+attack range combination.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistpos/enemythreat.gif">
								<p>In this example, Mia can rally Nephenee from all four sides. The upper, right, and lower tiles all have an enemy threatening them, while the left tile has no enemies threatening it. As such, Mia will prefer to rally Nephenee form the left tile.</p>
							</div></div></div>
						<p class="tab2">3. Requires teleportation: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Teleportation</h3>
								<p class="tab2">Assuming all else is equal, a tile that requires a teleportation to reach has priority over tiles that can be reached with standard movement. In game, these tiles are visually denoted as a lighter shade of blue when you are manually making a move. If a tile could be reached by both teleportation and by using Pivot, it is still considered a tile that requires teleportation, and Pivot will not be used if that tile is selected.
								
								<img src="images/teleportation.png" alt="teleportation tile diagram">
								
								<br>This is a table of sources of teleportation:</p>
								<table>
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Hinoka's Spear (Special Refine)</td>
													<td>Nóatún</td>
												</tr>
												<tr>
													<td>Grimoire</td>
													<td>Fruit of Iðunn</td>
												</tr>
												<tr>
													<td>Fujin Yumi (Special Refine)</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Passives:</th>
										<td class="left">
											<table>
												<tr>
													<td>Wings of Mercy 1/2/3</td>
													<td>Escape Route 1/2/3</td>
													<td>Flier Formation 1/2/3</td>
												</tr>
												<tr>
													<td>Aerobatics 1/2/3</td>
													<td>Guidance 1/2/3</td>
													<td>Flier Guidance 1/2/3</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Other</th>
										<td class="left">
											<ul>
												<li>Rival Domains/Grand Conquest warp tiles</li>
												<li>Grand Conquest bonus Guidance effect</li>
											</ul>
										</td>
									</tr>		
								</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistpos/teleport.gif">
								<p>In this example, Zelgius can rally Micaiah from the left, above, or below. Since tiles with lower enemy threats have priority, it only leaves the left and lower tiles which have 1 enemy threatening them, compared to above which has 2 enemy threats. Zelgius will ultimately rally Micaiah from below, because tiles that require teleportation to reach will have priority over others.</p>
							</div></div></div>
						<p class="tab2">4. Special terrain: Flier Terrain > Forest > Trench > Regular</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Terrain</h3>
								<p>Assuming all else is equal, a tile with more prohibitive terrain has priority over other tiles. The hierarchy of special terrains is: flier terrain > forest > trench > regular. Flier terrain is any terrain that can only be accessed by flying units, whether it be water, mountains, lava, abyss, etc. Forests hinder infantry and prohibit cavalry, so they are next. Trenches only hinder cavalry, so they are the least prohibitive special terrain. Regular tiles have the least priority, of course.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistpos/terrain.gif">
								<p>In this example, Mia can rally Nephenee from above or from the right. Because there is a forest tile to the right, Mia will prefer to rally Nephenee from there compared to the upper tile.</p>
							</div></div></div>
						<p class="tab2">5. Movement required: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Movement</h3>
								<p>Assuming all else is equal, a tile that requires the lowest amount of movement to reach has priority over other tiles. The only time this is not true is for standard movement if the unit has the "shuffle" status.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistpos/movement.gif">
								<p>In this example, Mia can rally Nephenee from all four sides. The only two not threatened by enemies are the left tile and the lower tile, the latter of which Mia is already standing on. As such, because the lower tile requires less movement, Mia will prefer to rally Nephenee from there.</p>
							</div></div></div>
						<p class="tab2">6. Tile priority value: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Tile Priority</h3>
								<p>Tile priority is the final tiebreaker for all situations where the AI must choose between multiple tiles. Tile priority is numbered from lowest to highest starting from the bottom left corner tile of the map, going right, and wrapping back up each row. Thus the highest priority tile is at the top right corner of the map.
						
								<img src="images/tilepriority.png" alt="tile priority diagram">
						
								<br><br>An easier way to visualize the priority relation between tiles is to remember the hierarchy of: Up > Right > Left > Down. A tile that is in a higher row than another always has priority. Between tiles in the same row, the one on the right always has priority.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistpos/tileprio.gif">
								<p>In this example, Mia can rally Nephenee from all four sides. The only two not threatened by enemies are the left and lower tiles, both of which require equal movement. The left tile will have higher priority than the lower one due to tile priority, and thus Mia will rally Nephenee from the left.</p>
							</div></div></div>
					<p class="tab1">G. For each target for each assister with movement assist, determine the optimal tile from which to assist the target, using these tiebreaks:</p>
						<p class="tab2">1. Enemy threat: lowest # (special note for Draw Back: this assist examines the tile that the user would end up on for lowest enemy threat)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Enemy Threat</h3>
								<p>Assuming all else is equal, a tile with less enemy threat has priority over other tiles with more enemy threat. A tile is considered threatened by an enemy if it is in range of the combination of an enemy's movement+attack ranges. It is expressed this way because movement range is stored at the beginning of the turn, so if movement range were to change in the middle of the turn (e.g. Gravity staff), it would still calculate using the movement range stored at the beginning of the turn. It is also expressed this way because terrain movement limitations like walls and trees do affect which tiles can be threatened by an enemy, but transient limitations like breakable blocks, other units blocking certain tiles, or tiles blocked by obstruct have no affect. To a similar effect, enemy threat also does not seem to consider tiles that can only be threatened through a teleportation skill, because those tiles are not within the movement+attack range combination.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_moveassistpos/enemythreat.gif">
								<p>In this example Mia can use Reposition on Soren from the left or from below. There are 2 enemies threatening the tile on the left, while only 1 enemy is threatening the tile below. As such, the lower tile will have priority over the one on the left.</p>
							</div></div></div>
						<p class="tab2">2. Requires teleportation: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Teleportation</h3>
								<p>Assuming all else is equal, a tile that requires a teleportation to reach has priority over tiles that can be reached with standard movement. In game, these tiles are visually denoted as a lighter shade of blue when you are manually making a move. If a tile could be reached by both teleportation and by using Pivot, it is still considered a tile that requires teleportation, and Pivot will not be used if that tile is selected.
								
								<img src="images/teleportation.png" alt="teleportation tile diagram">
								
								<br>This is a table of sources of teleportation:</p>
								<table>
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Hinoka's Spear (Special Refine)</td>
													<td>Nóatún</td>
												</tr>
												<tr>
													<td>Grimoire</td>
													<td>Fruit of Iðunn</td>
												</tr>
												<tr>
													<td>Fujin Yumi (Special Refine)</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Passives:</th>
										<td class="left">
											<table>
												<tr>
													<td>Wings of Mercy 1/2/3</td>
													<td>Escape Route 1/2/3</td>
													<td>Flier Formation 1/2/3</td>
												</tr>
												<tr>
													<td>Aerobatics 1/2/3</td>
													<td>Guidance 1/2/3</td>
													<td>Flier Guidance 1/2/3</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Other</th>
										<td class="left">
											<ul>
												<li>Rival Domains/Grand Conquest warp tiles</li>
												<li>Grand Conquest bonus Guidance effect</li>
											</ul>
										</td>
									</tr>		
								</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_moveassistpos/teleport.gif">
								<p>In this example, Mia can use Reposition on Soren from the left or from below. The tile from the left can be reached by regular movement, while the tile below requires Mia to use Wings of Mercy to get to it, and thus has higher priority.</p>
							</div></div></div>
						<p class="tab2">3. Movement required: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Movement</h3>
								<p>Assuming all else is equal, a tile that requires the lowest amount of movement to reach has priority over other tiles. The only time this is not true is for standard movement if the unit has the "shuffle" status.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_moveassistpos/movement.gif">
								<p>In this example, Mia can use Reposition on Soren from below or from the right. She is currently standing on the tile below Soren, so it would require no movement to reach, while the tile on the right would require 2 movement. As such, the tile below will have priority over the one on the right.</p>
							</div></div></div>
						<p class="tab2">4. Tile priority value: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Tile Priority</h3>
								<p>Tile priority is the final tiebreaker for all situations where the AI must choose between multiple tiles. Tile priority is numbered from lowest to highest starting from the bottom left corner tile of the map, going right, and wrapping back up each row. Thus the highest priority tile is at the top right corner of the map.
								
								<img src="images/tilepriority.png" alt="tile priority diagram">
								
								<br><br>An easier way to visualize the priority relation between tiles is to remember the hierarchy of: Up > Right > Left > Down. A tile that is in a higher row than another always has priority. Between tiles in the same row, the one on the right always has priority.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_moveassistpos/tileprio.gif">
								<p>In this example, Mia can use Reposition on Soren from below or from the right. They both require the same movement to reach, so according to the tile priority hierarchy of up > right > left > down, the right tile will have priority over the one below.</p>
							</div></div></div>
					<p class="tab1">H. For each assister with non-movement assist, determine best target to assist, using these tiebreaks:</p>
						<p class="tab2">1. Has "threatens enemy" status: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Threatens Enemy</h3>
								<p>This tiebreaker only exists for assist evaluation. Assuming all else is equal, the target who has the "threatens enemy" status has priority over other targets. In order to have the "threatens enemy" status, a weapon must be equipped. </p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assisttarget/threaten.gif">
								<p>In this example, Mia can rally Ike or the Black Knight. Ike is in range to attack the Axe Fighter and thus has the "threaten enemy" status, while the Black Knight is not in range to attack any enemy, although he is eligible for a rally because he is threatened by the Lance Fighter. However, Mia will prefer to rally Ike because he does have the "threaten enemy" status.</p>
							</div></div></div>
						<p class="tab2">2. Amount of stats buffed: highest # (ralliers only)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Amount of stats buffed</h3>
								<p>This tiebreaker only exists for rally assist evaluation. Assuming all else is equal, the target who receives a higher amount of stat buffs from a rally has priority over other targets. For example, a target 1 has a +2 defense buff while target 2 has no buffs. If the rallier has Rally Def, then target 2 would receive +4 def from the rally, while target 1 would only receive +2, thus target 2 has higher priority. For Harsh Command, the amount of debuff that is removed is added to the amount of buff given. For example, if a unit has a -7 def debuff and a +6 def buff, Harsh Command would give that unit 8 points of stat buffs for the purpose of this tiebreaker.</p>	
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assisttarget/rallyeff.gif">
								<p>In this example, Ike can rally Mia or Nephenee. Ike is using Rally Speed as his rally, but Mia already has a +3 Spd buff from Ike's Hone Spd 2 while Nephenee has no buffs currently. In this case, Ike will prefer to rally Nephenee because she will receive a higher amount of buffed stats than if Mia was rallied.</p>
							</div></div></div>
						<p class="tab2">3. Amount healed: highest # (healers only)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Amount Healed</h3>
								<p>This tiebreaker only exists for heal assist evaluation. Assuming all else is equal, the target who receives a bigger heal has priority over other targets. The most likely scenario for this tiebreaker to matter is when at least one target is not missing enough HP to receive the full effect of a heal. Another situation is when involving the Rehabilitate staff.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assisttarget/heal.gif">
								<p>In this example, Mist can heal either Ike or Soren. Mist has the Recover+ staff, which with her 27 Atk would heal up to 23 HP. Ike is missing 12 HP, while Soren is missing 24 HP, so Mist could heal 12 HP for Ike and 23 for Soren. As such, Mist will prefer to heal Soren over Ike due to amount of HP healed.</p>
							</div></div></div>
						<p class="tab2">4. Distance from closest enemy: lowest # (ralliers only)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Calculating Distance</h3>
								<p>Calculating distance is a function that is performed for various tiebreakers, which determines the distance from unit/tile A to unit/tile B. Distance calculation is a one-way calculation, meaning the distance from A to B is not necessarily the same as the distance from B to A. This is because distance uses the movement type of the unit related to A and factors in terrain that may hinder that movement type.
								
								<br><br>When calculating distance in this guide, it is actually saying to calculate the shortest distance. So when calculating distance from A to B, find the shortest path from A to B. When constructing these paths, forests are worth 2 tiles for infantry, while trenches are worth 3 tiles for cavalry. Untraversable tiles for unit A's movement type cannot be used in the path. The distance includes the tile that B occupies. This means that it is possible for there to be no path at all if B is on a tile that is unpathable for unit A. In that case, the distance is considered "undefined." All distances that are "undefined" are considered equal for the purpose of tiebreakers. Example of distance calculation from Mia to various enemies: 
								
								<img src="images/distance.png" alt="distance calculation diagram"></p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assisttarget/distance.gif">
								<p>In this example, Ike can rally Mia or Nephenee. Mia has a distance of 3 from her closest enemy, while Nephenee has a distance of 2 from her closest enemy. As such, Ike will prefer to rally Nephenee because she is closer to her nearest enemy.</p>
							</div></div></div>
						<p class="tab2">5. Visible stat total: highest # (non-restorers only)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Visible Stat Total</h3>
								<p class="tab2">This tiebreaker only exists for assist evaluation. Assuming all else is equal, the target who has a greater visible stat total has priority over other targets. Visible stat total is the combination of atk, spd, def, and res, and does NOT include HP. Visible stat total includes stats granted by passives and factors in buffs and debuffs, but does not account for in-combat boosts such as Brazen Atk/Def or Ward Armors.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assisttarget/stats.gif">
								<p>In this example, Ike can rally Mia or Nephenee, who are equally close to their nearest enemy. Mia has a visible stat total of 171 (57 atk + 49 spd + 34 def + 31 res) while Nephenee has a visible stat total of 149 (53 atk + 39 spd + 34 def + 23 res). As a result, Ike will prefer to rally Mia due to her superior visible stat total over Nephenee.</p>
							</div></div></div>
						<p class="tab2">6. Slot order: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</h3>
								<p>Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance, although in arena the enemy's deployment mirrors the player's. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map for which you info.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assisttarget/slotprio.gif">
								<p>In this example Mia can rally either Ike or Nephenee. They are both equally close to their nearest enemy, and they both have a visible stat total of 149. Mia will prefer to rally Nephenee because she has a higher slot number.</p>
							</div></div></div>
					<p class="tab1">I. For each assister with movement assist, determine best target to assist, using these tiebreaks:</p>
						<p class="tab2">1. Assisted with teleport skill: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Teleportation</h3>
								<p>Assuming all else is equal, a tile that requires a teleportation to reach has priority over tiles that can be reached with standard movement. In game, these tiles are visually denoted as a lighter shade of blue when you are manually making a move. If a tile could be reached by both teleportation and by using Pivot, it is still considered a tile that requires teleportation, and Pivot will not be used if that tile is selected.
								
								<img src="images/teleportation.png" alt="teleportation tile diagram">
								
								<br>This is a table of sources of teleportation:</p>
								<table>
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Hinoka's Spear (Special Refine)</td>
													<td>Nóatún</td>
												</tr>
												<tr>
													<td>Grimoire</td>
													<td>Fruit of Iðunn</td>
												</tr>
												<tr>
													<td>Fujin Yumi (Special Refine)</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Passives:</th>
										<td class="left">
											<table>
												<tr>
													<td>Wings of Mercy 1/2/3</td>
													<td>Escape Route 1/2/3</td>
													<td>Flier Formation 1/2/3</td>
												</tr>
												<tr>
													<td>Aerobatics 1/2/3</td>
													<td>Guidance 1/2/3</td>
													<td>Flier Guidance 1/2/3</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Other</th>
										<td class="left">
											<ul>
												<li>Rival Domains/Grand Conquest warp tiles</li>
												<li>Grand Conquest bonus Guidance effect</li>
											</ul>
										</td>
									</tr>		
								</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_moveassisttarget/teleport.gif">
								<p>In this example, Mia can use Reposition on either Soren or Micaiah. Mia does not require any teleportation to use Reposition on Micaiah, while she does need Wings of Mercy to use Reposition on Soren. As such, Mia will prefer to target Soren because it requires teleportation to assist him.</p>
							</div></div></div>
						<p class="tab2">2. Assister distance from target: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Calculating Distance</h3>
								<p>Calculating distance is a function that is performed for various tiebreakers, which determines the distance from unit/tile A to unit/tile B. Distance calculation is a one-way calculation, meaning the distance from A to B is not necessarily the same as the distance from B to A. This is because distance uses the movement type of the unit related to A and factors in terrain that may hinder that movement type.
								
								<br><br>When calculating distance in this guide, it is actually saying to calculate the shortest distance. So when calculating distance from A to B, find the shortest path from A to B. When constructing these paths, forests are worth 2 tiles for infantry, while trenches are worth 3 tiles for cavalry. Untraversable tiles for unit A's movement type cannot be used in the path. The distance includes the tile that B occupies. This means that it is possible for there to be no path at all if B is on a tile that is unpathable for unit A. In that case, the distance is considered "undefined." All distances that are "undefined" are considered equal for the purpose of tiebreakers. Example of distance calculation from Mia to various enemies: 
								
								<img src="images/distance.png" alt="distance calculation diagram"></p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_moveassisttarget/distance.gif">
								<p>In this example, Mia can use Reposition on Sanaki or Micaiah. Mia is 2 spaces away from Sanaki, while she is 3 spaces away from Micaiah. As such, Mia will prioritize using Reposition on Sanaki, since she a lower distance away.</p>
							</div></div></div>
						<p class="tab2">3. Slot order of adjacent blocked enemies: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</h3>
								<p>Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance, although in arena the enemy's deployment mirrors the player's. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map for which you info.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_moveassisttarget/slotprio.gif">
								<p>In this example, Mia can use Reposition on Sanaki or Micaiah. They are both equal distance away from Mia. The adjacent Lance Fighter that Sanaki is blocking has a slot number of 1, while the adjacent Axe Fighter that Micaiah is blocking as a slot number of 2. Thus, Mia will prefer to use Reposition on Micaiah, due to the higher slot number of the unit that Micaiah is blocking.</p>
							</div></div></div>
						<p class="tab2">4. Tile priority value: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Tile Priority</h3>
								<p class="tab2">Tile priority is the final tiebreaker for all situations where the AI must choose between multiple tiles. Tile priority is numbered from lowest to highest starting from the bottom left corner tile of the map, going right, and wrapping back up each row. Thus the highest priority tile is at the top right corner of the map.
								
								<img src="images/tilepriority.png" alt="tile priority diagram">
								
								<br><br>An easier way to visualize the priority relation between tiles is to remember the hierarchy of: Up > Right > Left > Down. A tile that is in a higher row than another always has priority. Between tiles in the same row, the one on the right always has priority.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_moveassisttarget/tileprio.gif">
								<p>In this example, Mia can use Reposition on Micaiah or Sanaki. Note that while Micaiah does not literally block Oscar from attacking in this situation, she is still a valid target just by virtue of being adjacent to a blocked enemy. According to the tile priority hierarchy, up > right > left > down, and since Micaiah is standing on the left while Sanaki is standing below, Micaiah is occupying a tile with higher priority and thus will be Repositioned by Mia over Sanaki.</p>
							</div></div></div>
					<p class="tab1">J. Determine the best assister from the list, using these tiebreaks:</p>
						<p class="tab2">1. Non-movement assist: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Non-Movement Assist Type</h3>
								<p>This tiebreaker only exists for non-movement assist evaluation. For pre-combat assists, assuming all else is equal, Refresh > Restore > Heal = Rally. For post-combat assists, it is always the case that Refresh > Restore > Heal > Rally > Defensive Movement Assist.p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistorder/nonmovement.gif">
								<p>In this example, Mia can rally Titania who is an eligible pre-combat assist target since she threatens the Lance Fighter, while Ike can use Draw Back on Soren because he is blocking Titania from attacking the Lance Fighter. Movement assists always have lower priority than other assists during pre-combat, Mia will rally Titania first.</p>
							</div></div></div>
						<p class="tab2">2. Has no weapon: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Weapon vs Weaponless</h3>
								<p>This tiebreaker only exists for assist evaluation and movement order list creation. For pre-combat assists, the assister with no weapon will always have priority over other assisters with weapons. For post-combat assists, assist type has priority over whether weapon is equipped.
						
								<br><br>For movement list creation, assuming all else is equal, a unit with a weapon will perform standard movement before a unit without a weapon.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistorder/weapon.gif">
								<p>In this example, Mia and Ike can rally Soren. Mia has Resolute Blade equipped, while Ike has no weapon equipped. As such, Ike will have priority over Mia to rally Soren due to having no weapon.</p>
							</div></div></div>
						<p class="tab2">3. Distance from closest enemy: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Calculating Distance</h3>
								<p>Calculating distance is a function that is performed for various tiebreakers, which determines the distance from unit/tile A to unit/tile B. Distance calculation is a one-way calculation, meaning the distance from A to B is not necessarily the same as the distance from B to A. This is because distance uses the movement type of the unit related to A and factors in terrain that may hinder that movement type.
								
								<br><br>When calculating distance in this guide, it is actually saying to calculate the shortest distance. So when calculating distance from A to B, find the shortest path from A to B. When constructing these paths, forests are worth 2 tiles for infantry, while trenches are worth 3 tiles for cavalry. Untraversable tiles for unit A's movement type cannot be used in the path. The distance includes the tile that B occupies. This means that it is possible for there to be no path at all if B is on a tile that is unpathable for unit A. In that case, the distance is considered "undefined." All distances that are "undefined" are considered equal for the purpose of tiebreakers. Example of distance calculation from Mia to various enemies: 
								
								<img src="images/distance.png" alt="distance calculation diagram"></p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistorder/distance.gif">
								<p>In this example, Mia and Ike can rally Soren. Mia has a distance of 4 from her closest enemy, while Ike has a distance of 5. As such, Ike will have priority to rally over Mia because his distance from his closest enemy is greater than Mia's.</p>
							</div></div></div>
						<p class="tab2">4. Non-movement assist type: Refresh = Restore > Heal = Rally</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Non-Movement Assist Type</h3>
								<p>This tiebreaker only exists for non-movement assist evaluation. For pre-combat assists, assuming all else is equal, Refresh > Restore > Heal = Rally. For post-combat assists, it is always the case that Refresh > Restore > Heal > Rally > Defensive Movement Assist.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistorder/assisttype.gif">
								<p>[I love Lene so she is honorary Tellius] In this example, Mia can rally Ike, while Lene can refresh Ike. Because refresh has higher priority than other non-movement assists, Lene will use Dance on Ike before Mia rallies him.</p>
							</div></div></div>
						<p class="tab2">5. Slot order: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</h3>
								<p>Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance, although in arena the enemy's deployment mirrors the player's. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map for which you info.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assistorder/slotprio.gif">
								<p>In this example, Mia and Ike can rally Soren. They are both equal distance from their closest enemy, but Mia has a lower slot number than Ike, so she will have priority in rallying Soren.</p>
							</div></div></div>
					<p class="tab1">K. Best assister uses its assist on its best target from the optimal tile; clear all states except for the movement order list from Step I and return to <a href="#step2">Step II [Assess Threats]</a></p>

					
					
				<p class="bigger" id="step5">V. Evaluate Attacks<p>
					<p class="tab1">A. If attacker list is empty, skip to <a href="#step6">Step VI [Evaluate Post-Combat Assists]</a></p>
					<p class="tab1">B. For each attacker in the attacker list, give it the "debuffer" status if it has any skill in <a href="charts.html#chartF">Chart F</a> equipped</p>
					<div class="tab2"><input class="spoilerbutton" type="button" value="Show Chart" onclick="this.value=this.value=='Show Chart'?'Hide Chart':'Show Chart';">
						<div class="spoiler"><div>
						<h2>Chart F: Def/Res Debuff Skills List</h2>
							<p>This chart lists skills which inflict Def and Res debuffs and are taken into consideration for the "debuffer" status for an attacker. If a skill inflicts def or res debuffs but is not on this list, it is NOT taken into consideration for the "debuffer" status. Don't ask me why, it seems to be completely arbitrary. 
				
							<br><br>There are currently two tiers of priority within this category. Tier 1 skills will have priority over tier 2 skills.</p>
							
							<h3>Tier 1<h3>
							<table>
								<tr>
									<th>Weapons:</th>
									<td class="left">
										<table>
											<tr>
												<td>Hliðskjálf</td>
											</tr>
										</table>
									</td>
								</tr>
							</table><br>
							
							<h3>Tier 2<h3>
							<table>
								<tr>
									<th>Weapons:</th>
									<td class="left">
										<table>
											<tr>
												<td>Rogue Dagger</td>
												<td>Rogue Dagger+ (Unrefined)</td>
											</tr>
											<tr>
												<td>Poison Dagger (vs infantry)</td>
												<td>Poison Dagger+ (vs infantry)</td>
											</tr>
											<tr>
												<td>Kitty Paddle (vs tomes)</td>
												<td>Kitty Paddle+ (vs tomes)</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr>
									<th>Passives:</th>
									<td class="left">
										<table>
											<tr>
												<td>Seal Def 1/2/3</td>
												<td>Seal Res 1/2/3</td>
											</tr>
											<tr>
												<td>Seal Atk/Def 1/2</td>
												<td>Seal Def/Res 1/2</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
						</div></div></div>
					<p class="tab1">C. For each attacker in the list, give it the "afflicter" status if it has any skill in <a href="charts.html#chartG">Chart G</a> equipped</p>
					<div class="tab2"><input class="spoilerbutton" type="button" value="Show Chart" onclick="this.value=this.value=='Show Chart'?'Hide Chart':'Show Chart';">
						<div class="spoiler"><div>
						<h2>Chart G: Miscellaneous Debuff Skills List</h2>
						<p>This chart lists skills which inflict miscellaneous debuffs/poison damage and are taken into consideration for the "afflicter" status for an attacker. If a skill inflicts a debuff or does poison damage but is not on this list, it is NOT taken into consideration for the "afflicter" status. Don't ask me why, it seems to be completely arbitrary.</p>
						<table>
							<tr>
								<th>Weapons:</th>
								<td class="left">
									<table>
										<tr>
											<td>Pain</td>
											<td>Pain+ (unrefined)</td>
											<td>Pain+ (refined)</td>
										</tr>
										<tr>
											<td>Panic</td>
											<td>Panic+ (unrefined)</td>
											<td>Panic+ (refined)</td>
										</tr>
										<tr>
											<td>Candlelight</td>
											<td>Candlelight+ (unrefined)</td>
											<td>Candlelight+ (refined)</td>
										</tr>
										<tr>
											<td>Trilemma</td>
											<td>Trilemma+ (unrefined)</td>
											<td>Trilemma+ (refined)</td>
										</tr>
										<tr>
											<td>Legion's Axe</td>
											<td>Legion's Axe+ (unrefined)</td>
											<td>Legion's Axe+ (refined)</td>
										</tr>
										<tr>
											<td>Monstrous Bow+ (refined)</td>
											<td>Spectral Tome+ (refined)</td>
										</tr>
										<tr>
											<td>Deathly Dagger (unrefined)</td>
											<td>Deathly Dagger (refined)</td>
										</tr>
									</table>
								</td>
							</tr>
							<tr>
								<th>Passives:</th>
								<td class="left">
									<table>
										<tr>
											<td>Poison Strike 1/2/3</td>
										</tr>
									</table>
								</td>
							</tr>
						</table>
						</div></div></div>
					<p class="tab1">D. For each attacker in the list, determine best target to attack, using these tiebreaks:</p>
						<p class="tab2">1. Best combat result: Win > Draw > Loss</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Combat Result</h3>
								<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, the target that results in the best combat has priority over other targets. The three different results for combat are win, draw, and loss, whose priority is in that order. Any win is better than any draw, and any draw is better than any loss. This tiebreaker does not exist in Rival Domains or Grand Conquest, perhaps because of infinite unit spawning requiring less conservative play that usually results from this tiebreaker.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attacktarget/result.gif">
								<p>In this example, Sanaki can attack four targets: Bruno, The Black Knight, Ike, and Elincia. From the combat results, we can see she has the Win result versus Ike, the Draw result versus Elincia, and the Loss result versus Bruno and The Black Knight. As such, Sanaki would prefer to attack Ike.</p>
							</div></div></div>
						<p class="tab2">2. Able to debuff target by at least 2 uncombined points in def or res: Y > N (attacker with "debuffer" status only)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Debuffs Enemy</h3>
								<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, a target that can be debuffed by at least 2 uncombined points of def or res by a skill in <a href="charts.html#chartF">Chart F</a> has priority over other units. This means for example that if the attacker could inflict -7 def with Seal Def 3, and target 1 has no debuffs while target 2 already has a -6 def debuff, then target 1 will have priority. It doesn't matter how much def or res would be debuffed, so long as the amount reaches the threshold of 2 and the appropriate skill is equipped. Having multiple applicable skills from the chart does not increase priority. </p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Chart" onclick="this.value=this.value=='Show Chart'?'Hide Chart':'Show Chart';">
							<div class="spoiler"><div>
							<h2>Chart F: Def/Res Debuff Skills List</h2>
							<p>This chart lists skills which inflict Def and Res debuffs and are taken into consideration for the "debuffer" status for an attacker. If a skill inflicts def or res debuffs but is not on this list, it is NOT taken into consideration for the "debuffer" status. Don't ask me why, it seems to be completely arbitrary. 
				
								<br><br>There are currently two tiers of priority within this category. Tier 1 skills will have priority over tier 2 skills.</p>
								
								<h3>Tier 1<h3>
								<table>
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Hliðskjálf</td>
												</tr>
											</table>
										</td>
									</tr>
								</table><br>
								
								<h3>Tier 2<h3>
								<table>
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Rogue Dagger</td>
													<td>Rogue Dagger+ (Unrefined)</td>
												</tr>
												<tr>
													<td>Poison Dagger (vs infantry)</td>
													<td>Poison Dagger+ (vs infantry)</td>
												</tr>
												<tr>
													<td>Kitty Paddle (vs tomes)</td>
													<td>Kitty Paddle+ (vs tomes)</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Passives:</th>
										<td class="left">
											<table>
												<tr>
													<td>Seal Def 1/2/3</td>
													<td>Seal Res 1/2/3</td>
												</tr>
												<tr>
													<td>Seal Atk/Def 1/2</td>
													<td>Seal Def/Res 1/2</td>
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attacktarget/debuff.gif">
								<p>In this example, Micaiah has three possible targets: Marth, Jagen, and Caeda. Micaiah has Seal Res 2 equipped, and thus has the "debuffer" status. Marth and Jagen are both already affected by -5 res debuffs, while Caeda has no debuffs. As such, Micaiah will prefer to attack Caeda here.</p>
							</div></div></div>
						<p class="tab2">3. Damage ratio: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Damage Ratio</h3>
								<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, a target that results in a better damage ratio for the attacker has priority over other targets. Damage ratio is calculated with the following formula:
								
								<br><br>[Net Damage Dealt]*3 - [Net Damage Taken]
								
								<br><br>Net damage is the change in health; that is, the difference between the health at which the unit starts combat and ends combat. If you do more damage to a unit than it has health, only the amount of health lost will be considered net damage. This also accounts for healing that may occur mid combat due to Absorb staff or certain specials. Being dealt 10 damage, but healing 10 health from Aether afterward, would be 0 net damage. Do note that heal only counts for actual HP restored; for example if Ike has 45/45 HP, is dealt 0 damage, then activates Aether, he will not heal. As such, his net damage taken is 0.  
								
								<br><br>This formula basically values dealing damage at 3 times the rate at which damage is being taken. So dealing 9 damage and taking 27 damage has the same exact value as dealing 0 damage while taking 0 damage. In the same vein, causing the target to heal makes that target a much lower priority. Causing the enemy to heal 10 HP (-10 net damage) has the same value as doing 0 damage and taking 30 damage.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attacktarget/ratio.gif">
								<p>In this example, Soren can attack two targets: Micaiah, or a Sword Knight. Looking at the damage ratios, he does 30 damage to Micaiah and takes 11, resulting in a damage ratio of 79. He does 21 damage to the Sword Knight and takes no damage, resulting in a damage ratio of 63. Since the damage ratio versus Micaiah is higher, Soren will prefer to attack her.</p>
							</div></div></div>
						<p class="tab2">4. Special charge increased: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Increasing Special Charge</h3>
								<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, the target whose special charge would be increased by the end of combat has priority over other targets. At the moment this always requires expending the enemy's special activation, whether it is an offensive special or a defensive one. Simply having it activate is not enough, as the charge must be higher than it was before combat. For instance, if Lukas has 0 CD on Sacred Cowl with Killer Lance before combat and is attacked twice by a bow, it will activate then go back down to 0 CD, thus resulting in no increase to the charge and not being eligible for this tiebreaker. The amount the special charge is increased doesn't matter, so long as it is increased at all.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attacktarget/special.gif">
								<p>In this example, Micaiah can attack two targets: Lukas, or the Axe Fighter. Because she can increase Lukas by the end of combat by activating his Sacred Cowl, Micaiah will prefer to attack Lukas.</p>
							</div></div></div>
						<p class="tab2">5. Slot order: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</h3>
								<p>Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance, although in arena the enemy's deployment mirrors the player's. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map for which you info.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attacktarget/slotprio.gif">
								<p>In this example, Micaiah can attack three targets: the Lance Fighter, the Sword Fighter, and the Axe Fighter. Although there is no easy visual indication, the slot order of the enemies on this map is 1. Lance Fighter, 2. Axe Fighter, 3. Sword Fighter. As such, Micaiah will prefer to attack the Sword Fighter because it has the highest slot number.</p>
							</div></div></div>
					<p class="tab1">E. Determine the best attacker from the list, using these tiebreaks:</p>
						<p class="tab2">1. Best combat result: Win > Draw > Loss</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Combat Result</h3>
								<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, the attacker with the best combat result will have priority over other attackers. The three different results for combat are win, draw, and loss, whose priority is in that order. Any win is better than any draw, and any draw is better than any loss.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackorder/result.gif">
								<p>In this example, Micaiah and Sanaki can make attacks. Micaiah's best result is a Draw, while Sanaki's best result is a Win. As such, Sanaki will have priority to attack over Micaiah.</p>
							</div></div></div>
						<p class="tab2">2. Has debuffer status and able to debuff its target by at least 2 uncombined points in def or res: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Debuffs Enemy</h3>
								<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, the attacker with the "debuffer" status who will debuff its target by at least 2 uncombined points of def or res will have priority over other attackers.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Chart" onclick="this.value=this.value=='Show Chart'?'Hide Chart':'Show Chart';">
							<div class="spoiler"><div>
							<h2>Chart F: Def/Res Debuff Skills List</h2>
							<p>This chart lists skills which inflict Def and Res debuffs and are taken into consideration for the "debuffer" status for an attacker. If a skill inflicts def or res debuffs but is not on this list, it is NOT taken into consideration for the "debuffer" status. Don't ask me why, it seems to be completely arbitrary. 
				
								<br><br>There are currently two tiers of priority within this category. Tier 1 skills will have priority over tier 2 skills.</p>
								
								<h3>Tier 1<h3>
								<table>
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Hliðskjálf</td>
												</tr>
											</table>
										</td>
									</tr>
								</table><br>
								
								<h3>Tier 2<h3>
								<table>
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Rogue Dagger</td>
													<td>Rogue Dagger+ (Unrefined)</td>
												</tr>
												<tr>
													<td>Poison Dagger (vs infantry)</td>
													<td>Poison Dagger+ (vs infantry)</td>
												</tr>
												<tr>
													<td>Kitty Paddle (vs tomes)</td>
													<td>Kitty Paddle+ (vs tomes)</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Passives:</th>
										<td class="left">
											<table>
												<tr>
													<td>Seal Def 1/2/3</td>
													<td>Seal Res 1/2/3</td>
												</tr>
												<tr>
													<td>Seal Atk/Def 1/2</td>
													<td>Seal Def/Res 1/2</td>
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackorder/debuff.gif">
								<p>In this example, Micaiah and Nephenee can make attacks on the Axe Fighter. Micaiah has Seal Res 2 equipped, and thus has the "debuffer" status. The Axe Fighter has no debuffs currently, and as such Micaiah will have attack priority over Nephenee.</p>
							</div></div></div>
						<p class="tab2">3. Has afflictor status and does not have the loss result against its best target: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Afflicts Enemies</h3>
								<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, the attacker with the "afflicter" status will have priority over other attackers. See <a href="charts.html#chartG">Chart G</a> for a list of miscellaneous debuff skills that give the "afflicter" status. It doesn't matter how many of these skills are equipped or how potent they are, only that the attacker his it.
								
								<br><br>This tiebreaker does not apply when the attackers have the loss combat result.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Chart" onclick="this.value=this.value=='Show Chart'?'Hide Chart':'Show Chart';">
							<div class="spoiler"><div>
							<h2>Chart G: Miscellaneous Debuff Skills List</h2>
							<p>This chart lists skills which inflict miscellaneous debuffs/poison damage and are taken into consideration for the "afflicter" status for an attacker. If a skill inflicts a debuff or does poison damage but is not on this list, it is NOT taken into consideration for the "afflicter" status. Don't ask me why, it seems to be completely arbitrary.</p>
							<table>
								<tr>
									<th>Weapons:</th>
									<td class="left">
										<table>
											<tr>
												<td>Pain</td>
												<td>Pain+ (unrefined)</td>
												<td>Pain+ (refined)</td>
											</tr>
											<tr>
												<td>Panic</td>
												<td>Panic+ (unrefined)</td>
												<td>Panic+ (refined)</td>
											</tr>
											<tr>
												<td>Candlelight</td>
												<td>Candlelight+ (unrefined)</td>
												<td>Candlelight+ (refined)</td>
											</tr>
											<tr>
												<td>Legion's Axe</td>
												<td>Legion's Axe+ (unrefined)</td>
												<td>Legion's Axe+ (refined)</td>
											</tr>
											<tr>
												<td>Monstrous Bow+ (refined)</td>
												<td>Spectral Tome+ (refined)</td>
											</tr>
											<tr>
												<td>Deathly Dagger (unrefined)</td>
												<td>Deathly Dagger (refined)</td>
											</tr>
										</table>
									</td>
								</tr>
								<tr>
									<th>Passives:</th>
									<td class="left">
										<table>
											<tr>
												<td>Poison Strike 1/2/3</td>
											</tr>
										</table>
									</td>
								</tr>
							</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackorder/afflict.gif">
								<p>In this example, Mia and Nephenee can make attacks on the Axe Fighter. Mia has Poison Strike 1 equipped, and thus has the "afflicter" status. Also, she does not have the loss result for her combat. As such Mia will have attack priority over Nephenee.</p>
							</div></div></div>
						<p class="tab2">4. Damage ratio: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Damage Ratio</h3>
								<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, an attacker that has a better damage ratio against its target has priority over other attackers. Damage ratio is calculated with the following formula:
								
								<br><br>[Net Damage Dealt]*3 - [Net Damage Taken]
								
								<br><br>Net damage is the change in health; that is, the difference between the health at which the unit starts combat and ends combat. If you do more damage to a unit than it has health, only the amount of health lost will be considered net damage. This also accounts for healing that may occur mid combat due to Absorb staff or certain specials. Being dealt 10 damage, but healing 10 health from Aether afterward, would be 0 net damage. Do note that heal only counts for actual HP restored; for example if Ike has 45/45 HP, is dealt 0 damage, then activates Aether, he will not heal. As such, his net damage taken is 0. 
								
								<br><br>This formula basically values dealing damage at 3 times the rate at which damage is being taken. So dealing 9 damage and taking 27 damage has the same exact value as dealing 0 damage while taking 0 damage. In the same vein, causing the target to heal makes that target a much lower priority. Causing the enemy to heal 10 HP (-10 net damage) has the same value as doing 0 damage and taking 30 damage.</p> 
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackorder/ratio.gif">
								<p>In this example, Micaiah and Sanaki can both make attacks. In Micaiah's attack, she does 52 damage to The Black Knight and takes no damage, resulting in a damage ratio of 156. Sanaki's attack does 47 damage to Ike while taking no damage, resulting in a damage ratio of 141. Since Micaiah's attack has a better damage ratio, she will have attack priority over Sanaki.</p>
							</div></div></div>
						<p class="tab2">5. Movement range: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Movement Range</h3>
								<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, an attacker with greater movement range will have priority over other attackers. This means that cavalry will have priority over infantry and fliers, who have priority over armors. Note that effects that alter movement range such as Armor March and Gravity will be considered for movement range in this tiebreaker.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackorder/moverange.gif">
								<p>In this example, Ike and Titania can both make attacks. Because Titania is a cavalry unit, she has 3 movement while Ike only has 2 movement as an infantry. As such, Titania will have attack priority over Ike.</p>
							</div></div></div>
						<p class="tab2">6. Target's special charge increased: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Increasing Special Charge</h3>
								<p>This tiebreaker only exists for attack evaluation. Assuming all else is equal, the attacker who would increase its target's special charge by the end of combat has priority over other attackers. At the moment this always requires expending the enemy's special activation, whether it is an offensive special or a defensive one. Simply having it activate is not enough, as the charge must be higher than it was before combat. For instance, if Lukas has 0 CD on Sacred Cowl with Killer Lance before combat and is attacked twice by a bow, it will activate then go back down to 0 CD, thus resulting in no increase to the charge and not being eligible for this tiebreaker. The amount the special charge is increased doesn't matter, so long as it is increased at all.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackorder/special.gif">
								<p>In this example, Nephenee and Micaiah can both make attacks on Lukas. Lukas has Sacred Cowl charged. If Nephenee attacks, Sacred Cowl will not be activated, but if Micaiah attacks, it will activate and the cooldown will increase from "charged" back to 2 CD. As such, Micaiah has attack priority over Nephenee.<p>
							</div></div></div>
						<p class="tab2">7. Slot order: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</a></h3>
								<p>Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance, although in arena the enemy's deployment mirrors the player's. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map for which you info.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/attackorder/slotprio.gif">
								<p>In this example, Mia and Nephenee can both make attacks on the Axe Fighter. Nephenee will get attack priority in this case because she has the higher slot number.</p>
							</div></div></div>
					<p class="tab1">F. Best attacker attacks its best target from the optimal tile; clear all states except for the movement order list from Step I and return to <a href="#step2">Step II [Assess Threats]</a></p>
					
					
					
				<p class="bigger" id="step6">VI. Evaluate Post-Combat Assists:</p>
					<p class="tab1">A. Add each unit with action with assist equipped to the assist list</p>
					<p class="tab1">B. For each assister on the list, populate a target list with each ally its assist can be used on</p>
					<p class="tab1">C. Check each target's post-combat eligibility using <a href="charts.html#chartD">Chart D</a></p>
					<div class="tab2"><input class="spoilerbutton" type="button" value="Show Chart" onclick="this.value=this.value=='Show Chart'?'Hide Chart':'Show Chart';">
						<div class="spoiler"><div>
						<h2>Chart D: Post-Combat Assist Target Eligibility</h2>
						<p>This chart shows the requirements for targets of various assists to be eligible to receive those assists post-combat (meaning, no attacks can be made by anyone on the team). This chart does not include requirements according to game rules (i.e. must be missing HP to be healed), only extra rules used by the AI.</p>
						<table>
					<tr>
					<thead>
						<th>Assist Type</th>
						<th>Related Assists</th>
						<th>Target Eligibility</th>
					</thead>
					</tr>
					<tr>
						<th>Refresh</th>
						<td class="left">
							<table>
								<tr><td>Dance</td></tr>
								<tr><td>Sing</td></tr>
							</table>
						<td class="left">
							<ul>
								<li>No additional requirements</li>
							</ul>
					</tr>
					<tr>
						<th>Restore</th>
						<td class="left">
							<table>
								<tr><td>Restore</td></tr>
								<tr><td>Restore+</td></tr>
							</table>
						</td>
						<td class="left">
							<ul>
								<li>If no eligible targets to remove debuffs from, behaves as a heal</li>
							</ul>
						</td>
					</tr>
					<tr>
						<th>Heal</th>
						<td class="left">
							<table>
								<tr>
									<td>Heal</td>
									<td>Mend</td>
									<td>Reconcile</td>
								</tr>
								<tr>
									<td>Physic</td>
									<td>Physic+</td>
									<td>Recover</td>
								</tr>
								<tr>
									<td>Recover+</td>
									<td>Martyr</td>
									<td>Martyr+</td>
								</tr>
								<tr>
									<td>Rehabilitate</td>
									<td>Rehabilitate+</td>
									<td>Restore</td>
								</tr>
								<tr>
									<td>Restore+</td>
									<td>Sacrifice</td>
									<td>Ardent Sacrifice</td>
								</tr>
								<tr>
									<td>Reciprocal Aid</td>
								</tr>
							</table>
						</td>
						<td class="left">
							<ul>
								<li>Ardent Sacrifice and Reciprocal Aid must be able to heal for as much as the user loses HP</li>
								<li>If being healed by Restore or Restore+, must not be eligible for being restored</li>

							</ul>
						</td>
					</tr>
					<tr>
						<th>Rally</th>
						<td class="left">
							<table>
								<tr>
									<td>Rally Attack</td>
									<td>Rally Speed</td>
									<td>Rally Defense</td>
								</tr>
								<tr>
									<td>Rally Resistance</td>
									<td>Rally Atk/Spd</td>
									<td>Rally Atk/Def</td>
								</tr>
								<tr>
									<td>Rally Atk/Res</td>
									<td>Rally Spd/Def</td>
									<td>Rally Spd/Res</td>
								</tr>
								<tr>
									<td>Rally Def/Res</td>
									<td>Harsh Command</td>
									<td>Sacrifice</td>
								</tr>
							</table>
						</td>
						<td class="left">
							<ul>
								<li>Has "threatens enemy" or "threatened by enemy" status</li>
								<li>If debuffs are being reversed by Sacrifice, must not be healed by it and cannot have action</li>

							</ul>
						</td>
					</tr>
					<tr>
						<th>Movement Assist</th>
						<td class="left">
							<table>
								<tr>
									<td>Shove</td>
									<td>Smite</td>
								</tr>
								<tr>
									<td>Draw Back</td>
									<td>Reposition</td>
								</tr>
								<tr>
									<td>Swap</td>
									<td>Future Vision</td>
								</tr>
							</table>
						<td class="left">
							<ul>
								<li>Does not have its action</li>
								<li>Has "threatened by enemy" status</li>
								<li>Can be moved into less enemy threat according to what assist is being used</li>
							</ul>
						</td>
					</tr>
				</table>
					</div></div></div>
					<p class="tab1">D. Remove ineligible targets from each assister's target list and remove assisters with no targets from assist list; if assist list is empty, skip to <a href="#step7">Step VII [Evaluate Movement]</a></p>
					<p class="tab1">E. For each assister, evaluate assist type using <a href="charts.html#chartC">Chart C</a></p>
					<div class="tab2"><input class="spoilerbutton" type="button" value="Show Chart" onclick="this.value=this.value=='Show Chart'?'Hide Chart':'Show Chart';">
						<div class="spoiler"><div>
						<h2>Chart C: Post-Combat Assist User Eligibility</h2>
						<p>This chart shows the requirements for users of various assists to be eligible to perform their assist post-combat (meaning, no attacks can be made by anyone on the team). </p>
						<table>
					<tr>
					<thead>
						<th>Assist Type</th>
						<th>Related Assists</th>
						<th>Target Eligibility</th>
					</thead>
					</tr>
					<tr>
						<th>Refresh</th>
						<td class="left">
							<table>
								<tr><td>Dance</td></tr>
								<tr><td>Sing</td></tr>
							</table>
						<td class="left">
							<ul>
								<li>No additional requirements</li>
							</ul>
					</tr>
					<tr>
						<th>Restore</th>
						<td class="left">
							<table>
								<tr><td>Restore</td></tr>
								<tr><td>Restore+</td></tr>
							</table>
						</td>
						<td class="left">
							<ul>
								<li>Must have a debuff status</li>
								<li>If eligible for being restored, it will not be considered a heal</li>
							</ul>
						</td>
					</tr>
					<tr>
						<th>Heal</th>
						<td class="left">
							<table>
								<tr>
									<td>Heal</td>
									<td>Mend</td>
									<td>Reconcile</td>
								</tr>
								<tr>
									<td>Physic</td>
									<td>Physic+</td>
									<td>Recover</td>
								</tr>
								<tr>
									<td>Recover+</td>
									<td>Martyr</td>
									<td>Martyr+</td>
								</tr>
								<tr>
									<td>Rehabilitate</td>
									<td>Rehabilitate+</td>
									<td>Restore</td>
								</tr>
								<tr>
									<td>Restore+</td>
									<td>Sacrifice</td>
									<td>Ardent Sacrifice</td>
								</tr>
								<tr>
									<td>Reciprocal Aid</td>
								</tr>
							</table>
						</td>
						<td class="left">
							<ul>
								<li>Is missing and can be healed by at least a certain amount of HP, according to assist being used (see <a href="#chartE">Chart E</a>)</li>
								<li>If being healed by Restore or Restore+, must not be eligible for being restored</li>
							</ul>
						</td>
					</tr>
					<tr>
						<th>Rally</th>
						<td class="left">
							<table>
								<tr>
									<td>Rally Attack</td>
									<td>Rally Speed</td>
									<td>Rally Defense</td>
								</tr>
								<tr>
									<td>Rally Resistance</td>
									<td>Rally Atk/Spd</td>
									<td>Rally Atk/Def</td>
								</tr>
								<tr>
									<td>Rally Atk/Res</td>
									<td>Rally Spd/Def</td>
									<td>Rally Spd/Res</td>
								</tr>
								<tr>
									<td>Rally Def/Res</td>
									<td>Harsh Command</td>
									<td>Sacrifice</td>
								</tr>
							</table>
						</td>
						<td class="left">
							<ul>
								<li>Has its action</li>
								<li>Has the "threatening enemy" or "threatened by enemy" status</li>
								<li>If receiving a rally skill, can be buffed by at least 2 points in one particular stat by the rally</li>
								<li>If receiving Harsh Command or Sacrifice, must have a stat debuff</li>
							</ul>
						</td>
					</tr>
					<tr>
						<th>Movement Assist</th>
						<td class="left">
							<table>
								<tr>
									<td>Shove</td>
									<td>Smite</td>
								</tr>
								<tr>
									<td>Draw Back</td>
									<td>Reposition</td>
								</tr>
							</table>
						</td>
						<td class="left">
							<ul>
								<li>Does not have its action</li>
								<li>Is adjacent to an enemy that is threatened by an ally who has its action(if at least 1 melee ally is blocked)</li>
								<li>Is 1 space away from an enemy that is threatened by an ally who has its action(if at least 1 ranged ally is blocked)</li>
							</ul>
						</td>
					</tr>
				</table>
				
				<br><br><h2 id="chartC">Chart C: Post-Combat Assist User Eligibility</h2>
				<p>This chart shows the requirements for users of various assists to be eligible to perform their assist post-combat (meaning, no attacks can be made by anyone on the team). </p>
				<table>
					<tr>
					<thead>
						<th>Assist Type</th>
						<th>Related Assists</th>
						<th>User Eligibility</th>
					</thead>
					</tr>
					<tr>
						<th>Refresh</th>
						<td class="left">
							<table>
								<tr><td>Dance</td></tr>
								<tr><td>Sing</td></tr>
							</table>
						<td class="left">
							<ul>
								<li>No additional requirements</li>
							</ul>
					</tr>
					<tr>
						<th>Restore</th>
						<td class="left">
							<table>
								<tr><td>Restore</td></tr>
								<tr><td>Restore+</td></tr>
							</table>
						</td>
						<td class="left">
							<ul>
								<li>If no eligible targets to remove debuffs from, behaves as a heal</li>
							</ul>
						</td>
					</tr>
					<tr>
						<th>Heal</th>
						<td class="left">
							<table>
								<tr>
									<td>Heal</td>
									<td>Mend</td>
									<td>Reconcile</td>
								</tr>
								<tr>
									<td>Physic</td>
									<td>Physic+</td>
									<td>Recover</td>
								</tr>
								<tr>
									<td>Recover+</td>
									<td>Martyr</td>
									<td>Martyr+</td>
								</tr>
								<tr>
									<td>Rehabilitate</td>
									<td>Rehabilitate+</td>
									<td>Restore</td>
								</tr>
								<tr>
									<td>Restore+</td>
									<td>Sacrifice</td>
									<td>Ardent Sacrifice</td>
								</tr>
								<tr>
									<td>Reciprocal Aid</td>
								</tr>
							</table>
						</td>
						<td class="left">
							<ul>
								<li>Ardent Sacrifice and Reciprocal Aid must be able to heal its target for as much as the user loses HP</li>
								<li>If using Restore or Restore+, unit must not behave as restorer</li>
							</ul>
						</td>
					</tr>
					<tr>
						<th>Rally</th>
						<td class="left">
							<table>
								<tr>
									<td>Rally Attack</td>
									<td>Rally Speed</td>
									<td>Rally Defense</td>
								</tr>
								<tr>
									<td>Rally Resistance</td>
									<td>Rally Atk/Spd</td>
									<td>Rally Atk/Def</td>
								</tr>
								<tr>
									<td>Rally Atk/Res</td>
									<td>Rally Spd/Def</td>
									<td>Rally Spd/Res</td>
								</tr>
								<tr>
									<td>Rally Def/Res</td>
									<td>Harsh Command</td>
									<td>Sacrifice</td>
								</tr>
							</table>
						</td>
						<td class="left">
							<ul>
								<li>If using Sacrifice, must not be able to heal any another unit</li>
							</ul>
						</td>
					</tr>
					<tr>
						<th>Movement Assist</th>
						<td class="left">
							<table>
								<tr>
									<td>Shove</td>
									<td>Smite</td>
								</tr>
								<tr>
									<td>Draw Back</td>
									<td>Reposition</td>
								</tr>
								<tr>
									<td>Swap</td>
								</tr>
							</table>
						<td class="left">
							<ul>
								<li>If user is a melee unit with a weapon equipped, it gains "blocker" status</li>
							</ul>
						</td>
					</tr>
				</table>
						</div></div></div>
					<p class="tab1">F. For each target for each assister with non-movement assist, determine the optimal tile from which to assist the target, using these tiebreaks:</p>
						<p class="tab2">1. Defense tile: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Defense Tiles</h3>
								<p>Assuming all else is equal, defense tiles have priority over tiles without defense tiles when choosing position.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistpos/deftile.gif">
								<p>In this example, Mia can rally Nephenee from above, to the right, or from the left where she is currently standing. She rallies from above due to the defense tile as opposed to the left tile.</p>
							</div></div></div>
						<p class="tab2">2. Enemy threat: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Enemy Threat</h3>
								<p>Assuming all else is equal, a tile with less enemy threat has priority over other tiles with more enemy threat. A tile is considered threatened by an enemy if it is in range of the combination of an enemy's movement+attack ranges. It is expressed this way because movement range is stored at the beginning of the turn, so if movement range were to change in the middle of the turn (e.g. Gravity staff), it would still calculate using the movement range stored at the beginning of the turn. It is also expressed this way because terrain movement limitations like walls and trees do affect which tiles can be threatened by an enemy, but transient limitations like breakable blocks, other units blocking certain tiles, or tiles blocked by obstruct have no affect. To a similar effect, enemy threat also does not seem to consider tiles that can only be threatened through a teleportation skill, because those tiles are not within the movement+attack range combination.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistpos/enemythreat.gif">
								<p>In this example, Mia can rally Nephenee from all four sides. The upper, right, and lower tiles all have an enemy threatening them, while the left tile has no enemies threatening it. As such, Mia will prefer to rally Nephenee form the left tile.</p>
							</div></div></div>
						<p class="tab2">3. Requires teleportation: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Teleportation</h3>
								<p>Assuming all else is equal, a tile that requires a teleportation to reach has priority over tiles that can be reached with standard movement. In game, these tiles are visually denoted as a lighter shade of blue when you are manually making a move. If a tile could be reached by both teleportation and by using Pivot, it is still considered a tile that requires teleportation, and Pivot will not be used if that tile is selected.
								
								<img src="images/teleportation.png" alt="teleportation tile diagram">
								
								<br>This is a table of sources of teleportation:</p>
								<table>
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Hinoka's Spear (Special Refine)</td>
													<td>Nóatún</td>
												</tr>
												<tr>
													<td>Grimoire</td>
													<td>Fruit of Iðunn</td>
												</tr>
												<tr>
													<td>Fujin Yumi (Special Refine)</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Passives:</th>
										<td class="left">
											<table>
												<tr>
													<td>Wings of Mercy 1/2/3</td>
													<td>Escape Route 1/2/3</td>
													<td>Flier Formation 1/2/3</td>
												</tr>
												<tr>
													<td>Aerobatics 1/2/3</td>
													<td>Guidance 1/2/3</td>
													<td>Flier Guidance 1/2/3</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Other</th>
										<td class="left">
											<ul>
												<li>Rival Domains/Grand Conquest warp tiles</li>
												<li>Grand Conquest bonus Guidance effect</li>
											</ul>
										</td>
									</tr>		
								</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistpos/teleport.gif">
								<p>In this example, Zelgius can rally Micaiah from the left, above, or below. Since tiles with lower enemy threats have priority, it only leaves the left and lower tiles which have 1 enemy threatening them, compared to above which has 2 enemy threats. Zelgius will ultimately rally Micaiah from below, because tiles that require teleportation to reach will have priority over others.</p>
							</div></div></div>
						<p class="tab2">4. Special terrain: Flier Terrain > Forest > Trench > Regular</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Terrain</h3>
								<p>Assuming all else is equal, a tile with more prohibitive terrain has priority over other tiles. The hierarchy of special terrains is: flier terrain > forest > trench > regular. Flier terrain is any terrain that can only be accessed by flying units, whether it be water, mountains, lava, abyss, etc. Forests hinder infantry and prohibit cavalry, so they are next. Trenches only hinder cavalry, so they are the least prohibitive special terrain. Regular tiles have the least priority, of course.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistpos/terrain.gif">
								<p>In this example, Mia can rally Nephenee from above or from the right. Because there is a forest tile to the right, Mia will prefer to rally Nephenee from there compared to the upper tile.</p>
							</div></div></div>
						<p class="tab2">5. Movement Required: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Movement</h3>
								<p>Assuming all else is equal, a tile that requires the lowest amount of movement to reach has priority over other tiles. The only time this is not true is for standard movement if the unit has the "shuffle" status.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistpos/movement.gif">
								<p>In this example, Mia can rally Nephenee from all four sides. The only two not threatened by enemies are the left tile and the lower tile, the latter of which Mia is already standing on. As such, because the lower tile requires less movement, Mia will prefer to rally Nephenee from there.</p>
							</div></div></div>
						<p class="tab2">6. Tile priority value: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Tile Priority</h3>
								<p>Tile priority is the final tiebreaker for all situations where the AI must choose between multiple tiles. Tile priority is numbered from lowest to highest starting from the bottom left corner tile of the map, going right, and wrapping back up each row. Thus the highest priority tile is at the top right corner of the map.
								
								<img src="images/tilepriority.png" alt="tile priority diagram">
								
								<br><br>An easier way to visualize the priority relation between tiles is to remember the hierarchy of: Up > Right > Left > Down. A tile that is in a higher row than another always has priority. Between tiles in the same row, the one on the right always has priority.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistpos/tileprio.gif">
								<p>In this example, Mia can rally Nephenee from all four sides. The only two not threatened by enemies are the left and lower tiles, both of which require equal movement. The left tile will have higher priority than the lower one due to tile priority, and thus Mia will rally Nephenee from the left.</p>
							</div></div></div>
					<p class="tab1">G. For each target for each assister with movement assist, determine the optimal tile from which to assist the target, using these tiebreaks:</p>
						<p class="tab2">1. Able to bodyblock and prevent a melee enemy from attacking the ally ("blocker" status only; target MUST be eligible for assist)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Bodyblocking</h3>
								<p>A tile on which a blocker can perform bodyblocking will have priority over others. This is because despite not actually using an assist and only using movement, bodyblocking has the same priority level as a defensive movement assist.</p>
								
								<p>Bodyblocking is a special mode of defensive movement assist. It looks like regular movement, since when bodyblocking, the bodyblocker never actually uses its assist. However, the bodyblocker must have a defensive assist skill equipped and be able to use that assist on the target; the action of bodyblocking simply overrides the assist usage when applicable. They also perform the action in the same phase as regular defensive assist behavior, as opposed to performing it when standard movement is performed.
								
								<img src="videos/bodyblocking.gif" alt="bodyblocking example gif">
								
								<br><br>The purpose of bodyblocking is to reduce enemy threat to an ally by blocking at least 1 enemy melee unit's path to that ally. It can almost be thought of as a more offensive version of Swap.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<div class="row">
								  <div class="column">
									<img src="videos/post_moveassistpos/bodyblock1.gif" style="width:50%">
								  </div>
								  <div class="column">
									<img src="videos/post_moveassistpos/bodyblock2.gif" style="width:50%">
								  </div>
								</div>
								<p>In the first example, Mia could use Reposition on Soren to get him out of enemy threat range. However, because Mia is a melee unit with a weapon and defensive movement assist equipped, she has the "blocker" status. By moving to the tile above Soren, she can block the only path that the Lance Fighter has to reach Soren, and as such this tile and behavior has the highest priority.
								
								<br><br>In the second example, Mia no longer has Reposition. She will no longer be able to perform bodyblock behavior, so she moves toward the Axe Fighter, her target for standard movement. This is to clear up any suspiscions that Mia is performing regular movement in the first example.</p>
							</div></div></div>
						<p class="tab2">2. Enemy threat: lowest # (special note for Draw Back: this assist examines the tile that the user would end up on for lowest enemy threat)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Enemy Threat</h3>
								<p>Assuming all else is equal, a tile with less enemy threat has priority over other tiles with more enemy threat. A tile is considered threatened by an enemy if it is in range of the combination of an enemy's movement+attack ranges. It is expressed this way because movement range is stored at the beginning of the turn, so if movement range were to change in the middle of the turn (e.g. Gravity staff), it would still calculate using the movement range stored at the beginning of the turn. It is also expressed this way because terrain movement limitations like walls and trees do affect which tiles can be threatened by an enemy, but transient limitations like breakable blocks, other units blocking certain tiles, or tiles blocked by obstruct have no affect. To a similar effect, enemy threat also does not seem to consider tiles that can only be threatened through a teleportation skill, because those tiles are not within the movement+attack range combination.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_moveassistpos/enemythreat.gif">
								<p>In this example, Mia can use Reposition on Soren from the right or from below. The tile on the right is threatened by 2 enemies, while the tile below is threatened by 1 enemy. As such, Mia will prefer to use Reposition on Soren from below.</p>
							</div></div></div>
						<p class="tab2">3. Requires teleportation: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Teleportation</h3>
								<p>Assuming all else is equal, a tile that requires a teleportation to reach has priority over tiles that can be reached with standard movement. In game, these tiles are visually denoted as a lighter shade of blue when you are manually making a move. If a tile could be reached by both teleportation and by using Pivot, it is still considered a tile that requires teleportation, and Pivot will not be used if that tile is selected.
								
								<img src="images/teleportation.png" alt="teleportation tile diagram">
								
								<br>This is a table of sources of teleportation:</p>
								<table>
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Hinoka's Spear (Special Refine)</td>
													<td>Nóatún</td>
												</tr>
												<tr>
													<td>Grimoire</td>
													<td>Fruit of Iðunn</td>
												</tr>
												<tr>
													<td>Fujin Yumi (Special Refine)</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Passives:</th>
										<td class="left">
											<table>
												<tr>
													<td>Wings of Mercy 1/2/3</td>
													<td>Escape Route 1/2/3</td>
													<td>Flier Formation 1/2/3</td>
												</tr>
												<tr>
													<td>Aerobatics 1/2/3</td>
													<td>Guidance 1/2/3</td>
													<td>Flier Guidance 1/2/3</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Other</th>
										<td class="left">
											<ul>
												<li>Rival Domains/Grand Conquest warp tiles</li>
												<li>Grand Conquest bonus Guidance effect</li>
											</ul>
										</td>
									</tr>		
								</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_moveassistpos/teleport.gif">
								<p>In this example, Mia can use Reposition on Soren from the right or from below. The tile on the right can be reached by regular movement, while the tile below is only accessible to Mia when she uses Wings of Mercy. As such, Mia will use Reposition on Soren from below because it requires teleportation.</p>
							</div></div></div>
						<p class="tab2">4. Movement required: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Movement</h3>
								<p>Assuming all else is equal, a tile that requires the lowest amount of movement to reach has priority over other tiles. The only time this is not true is for standard movement if the unit has the "shuffle" status.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_moveassistpos/movement.gif">
								<p>In this example, Mia can use Reposition on Soren from the right or from below. Mia is already standing on the tile below, and thus would require 0 movement for that tile, while the tile on the right would require 2 movement. As such, Mia will prefer to use Reposition on Soren from below.</p>
							</div></div></div>
						<p class="tab2">5. Tile priority value: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Tile Priority</h3>
								<p>Tile priority is the final tiebreaker for all situations where the AI must choose between multiple tiles. Tile priority is numbered from lowest to highest starting from the bottom left corner tile of the map, going right, and wrapping back up each row. Thus the highest priority tile is at the top right corner of the map.
								
								<img src="images/tilepriority.png" alt="tile priority diagram">
								
								<br><br>An easier way to visualize the priority relation between tiles is to remember the hierarchy of: Up > Right > Left > Down. A tile that is in a higher row than another always has priority. Between tiles in the same row, the one on the right always has priority.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_moveassistpos/tileprio.gif">
								<p>In this example, Mia can use Reposition on Soren from the right or from below. According to the tile priority hierarchy of up > right > left > down, the right tile has higher priority than the tile below. As such, Mia will prefer to use Reposition on Soren from the right.</p>
							</div></div></div>
					<p class="tab1">H. For each assister with non-movement assist, determine best target to assist, using these tiebreaks:</p>
						<p class="tab2">1. Amount healed: highest # (healers only)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Amount Healed</h3>
								<p>This tiebreaker only exists for heal assist evaluation. Assuming all else is equal, the target who receives a bigger heal has priority over other targets. The most likely scenario for this tiebreaker to matter is when at least one target is not missing enough HP to receive the full effect of a heal. Another situation is when involving the Rehabilitate staff.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assisttarget/heal.gif">
								<p>In this example, Mist can heal either Ike or Soren. Mist has the Recover+ staff, which with her 27 Atk would heal up to 23 HP. Ike is missing 12 HP, while Soren is missing 24 HP, so Mist could heal 12 HP for Ike and 23 for Soren. As such, Mist will prefer to heal Soren over Ike due to amount of HP healed.</p>
							</div></div></div>
						<p class="tab2">2. Amount of stats buffed: highest # (ralliers only)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Amount of stats buffed</h3>
								<p>This tiebreaker only exists for rally assist evaluation. Assuming all else is equal, the target who receives a higher amount of stat buffs from a rally has priority over other targets. For example, a target 1 has a +2 defense buff while target 2 has no buffs. If the rallier has Rally Def, then target 2 would receive +4 def from the rally, while target 1 would only receive +2, thus target 2 has higher priority. For Harsh Command, the amount of debuff that is removed is added to the amount of buff given. For example, if a unit has a -7 def debuff and a +6 def buff, Harsh Command would give that unit 8 points of stat buffs for the purpose of this tiebreaker.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/pre_assisttarget/rallyeff.gif">
								<p>In this example, Ike can rally Mia or Nephenee. Ike is using Rally Speed as his rally, but Nephenee already has a +3 Spd buff from Ike's Hone Spd 2 while Mia has no buffs currently. In this case, Ike will prefer to rally Mia because she will receive a higher amount of buffed stats than if Nephenee was rallied.</p>
							</div></div></div>
						<p class="tab2">3. Distance from closest enemy: lowest # (ralliers only)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Calculating Distance</h3>
								<p>Calculating distance is a function that is performed for various tiebreakers, which determines the distance from unit/tile A to unit/tile B. Distance calculation is a one-way calculation, meaning the distance from A to B is not necessarily the same as the distance from B to A. This is because distance uses the movement type of the unit related to A and factors in terrain that may hinder that movement type.
								
								<br><br>When calculating distance in this guide, it is actually saying to calculate the shortest distance. So when calculating distance from A to B, find the shortest path from A to B. When constructing these paths, forests are worth 2 tiles for infantry, while trenches are worth 3 tiles for cavalry. Untraversable tiles for unit A's movement type cannot be used in the path. The distance includes the tile that B occupies. This means that it is possible for there to be no path at all if B is on a tile that is unpathable for unit A. In that case, the distance is considered "undefined." All distances that are "undefined" are considered equal for the purpose of tiebreakers. Example of distance calculation from Mia to various enemies: 
								
								<img src="images/distance.png" alt="distance calculation diagram"></p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assisttarget/distance.gif">
								<p>In this example, Ike can rally Mia or Nephenee. Mia has a distance of 2 from her closest enemy, while Nephenee has a distance of 3 from her closest enemy. As such, Ike will prefer to rally Mia because she is closer to her nearest enemy.</p>
							</div></div></div>
						<p class="tab2">4. Visible stat total: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Visible Stat Total</h3>
								<p>This tiebreaker only exists for assist evaluation. Assuming all else is equal, the target who has a greater visible stat total has priority over other targets. Visible stat total is the combination of atk, spd, def, and res, and does NOT include HP. Visible stat total includes stats granted by passives and factors in buffs and debuffs, but does not account for in-combat boosts such as Brazen Atk/Def or Ward Armors.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assisttarget/stats.gif">
								<p>In this example, Ike can rally Mia or Nephenee, who are equally close to their nearest enemy. Mia has a visible stat total of 171 (57 atk + 49 spd + 34 def + 31 res) while Nephenee has a visible stat total of 149 (53 atk + 39 spd + 34 def + 23 res). As a result, Ike will prefer to rally Mia due to her superior visible stat total over Nephenee.</p>
							</div></div></div>
						<p class="tab2">5. Slot order: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</h3>
								<p>Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance, although in arena the enemy's deployment mirrors the player's. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map for which you info.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assisttarget/slotprio.gif">
								<p>In this example Mia can rally either Ike or Nephenee. They are both equally close to their nearest enemy, and they both have a visible stat total of 149. Mia will prefer to rally Nephenee because she has a higher slot number.</p>
							</div></div></div>
					<p class="tab1">I. For each assister with movement assist, determine best target to assist, using these tiebreaks:</p>
						<p class="tab2">1. Assisted with teleport skill: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Teleportation</h3>
								<p>Assuming all else is equal, a tile that requires a teleportation to reach has priority over tiles that can be reached with standard movement. In game, these tiles are visually denoted as a lighter shade of blue when you are manually making a move. If a tile could be reached by both teleportation and by using Pivot, it is still considered a tile that requires teleportation, and Pivot will not be used if that tile is selected.
								
								<img src="images/teleportation.png" alt="teleportation tile diagram">
								
								<br>This is a table of sources of teleportation:</p>
								<table class="tab2">
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Hinoka's Spear (Special Refine)</td>
													<td>Nóatún</td>
												</tr>
												<tr>
													<td>Grimoire</td>
													<td>Fruit of Iðunn</td>
												</tr>
												<tr>
													<td>Fujin Yumi (Special Refine)</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Passives:</th>
										<td class="left">
											<table>
												<tr>
													<td>Wings of Mercy 1/2/3</td>
													<td>Escape Route 1/2/3</td>
													<td>Flier Formation 1/2/3</td>
												</tr>
												<tr>
													<td>Aerobatics 1/2/3</td>
													<td>Guidance 1/2/3</td>
													<td>Flier Guidance 1/2/3</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Other</th>
										<td class="left">
											<ul>
												<li>Rival Domains/Grand Conquest warp tiles</li>
												<li>Grand Conquest bonus Guidance effect</li>
											</ul>
										</td>
									</tr>		
								</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_moveassisttarget/teleport.gif">
								<p>In this example, Mia can use Reposition on Soren and Micaiah. Mia can reach Micaiah with regular movement, but cannot reach Soren without the aid of Wings of Mercy. As such, Mia will prefer to use Reposition on Soren because it requires teleportation.</p>
							</div></div></div>
						<p class="tab2">2. Visible stat total: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Visible Stat Total</h3>
								<p>This tiebreaker only exists for assist evaluation. Assuming all else is equal, the target who has a greater visible stat total has priority over other targets. Visible stat total is the combination of atk, spd, def, and res, and does NOT include HP. Visible stat total includes stats granted by passives and factors in buffs and debuffs, but does not account for in-combat boosts such as Brazen Atk/Def or Ward Armors.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_moveassisttarget/stats.gif">
								<p>In this example, Mia can use Reposition on Micaiah or Sanaki. Micaiah has a visible stat total of 129 (49 + 24 + 18 + 38) while Sanaki has a visible stat total of 128 (49 + 27 + 17 + 35). As such, Mia will prioritize using Reposition on Micaiah.</p>
							</div></div></div>
						<p class="tab2">3. Distance from target: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Calculating Distance</h3>
								<p>Calculating distance is a function that is performed for various tiebreakers, which determines the distance from unit/tile A to unit/tile B. Distance calculation is a one-way calculation, meaning the distance from A to B is not necessarily the same as the distance from B to A. This is because distance uses the movement type of the unit related to A and factors in terrain that may hinder that movement type.
								
								<br><br>When calculating distance in this guide, it is actually saying to calculate the shortest distance. So when calculating distance from A to B, find the shortest path from A to B. When constructing these paths, forests are worth 2 tiles for infantry, while trenches are worth 3 tiles for cavalry. Untraversable tiles for unit A's movement type cannot be used in the path. The distance includes the tile that B occupies. This means that it is possible for there to be no path at all if B is on a tile that is unpathable for unit A. In that case, the distance is considered "undefined." All distances that are "undefined" are considered equal for the purpose of tiebreakers. Example of distance calculation from Mia to various enemies: 
								
								<img src="images/distance.png" alt="distance calculation diagram"></p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_moveassisttarget/distance.gif">
								<p>In this example, Mia can use Reposition on Micaiah and Sanaki. They both have an equal visible stat total right now (129). Micaiah is 2 spaces away from Mia, while Sanaki is only 1, so Mia will prioritize using Reposition on Sanaki.</p>
							</div></div></div>
						<p class="tab2">4. Slot number: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</h3>
								<p>Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance, although in arena the enemy's deployment mirrors the player's. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map for which you info.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_moveassisttarget/slotprio.gif">
								<p>In this example, Mia can use Reposition on Micaiah or Sanaki. They both have the same visible stat total right now (129) and have equal distance from Mia. Mia will prefer to use Reposition on Sanaki because she has a higher slot number than Micaiah.</p>
							</div></div></div>
					<p class="tab1">J. Determine the best assister fromt he list, using these tiebreaks:</p>
						<p class="tab2">1. Assist type: Refresh > Restore > Heal > Rally > Movement</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Non-Movement Assist Type</h3>
								<p>This tiebreaker only exists for non-movement assist evaluation. For pre-combat assists, assuming all else is equal, Refresh > Restore > Heal = Rally. For post-combat assists, it is always the case that Refresh > Restore > Heal > Rally > Defensive Movement Assist.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistorder/assisttype.gif">
								<p>In this example, Mia can rally Ike, while Mist can heal Ike. According to the hierarchy of post-combat assists, heals have higher priority than rallies, so Mist will heal Soren first.</p>
							</div></div></div>
						<p class="tab2">2. Has no weapon: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Weapon vs Weaponless</h3>
								<p>This tiebreaker only exists for assist evaluation and movement order list creation. For pre-combat assists, the assister with no weapon will always have priority over other assisters with weapons. For post-combat assists, assist type has priority over whether weapon is equipped.
						
								<br><br>For movement list creation, assuming all else is equal, a unit with a weapon will perform standard movement before a unit without a weapon.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistorder/weapon.gif">
								<p>In this example, Mia and Ike can rally Soren. Mia has her weapon equipped, while Ike has no weapon equipped. As such, Ike will have priority over Mia because he has no weapon equipped.</p>
							</div></div></div>
						<p class="tab2">3. Is a staff user or has the Sacrifice assist: Y > N (healers only)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Misc Heal Tiebreaker</h3>
								<p>This tiebreaker only exists for post combat healing priority. Staff users (and thus have a staff based assist) as well as the Sacrifice assist seem to have higher priority than Ardent Sacrifice or Reciprocal Aid.
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistorder/healtype.gif">
								<p>In this example, Mia and Mist can heal Soren. Mia uses Ardent Sacrifice to heal, while Mist uses Recover+. Because Mist is using a staff heal, she has priority over Ardent Sacrifice and Reciprocal Aid.</p>
							</div></div></div>
						<p class="tab2">4. Distance from closest enemy: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Calculating Distance</h3>
								<p>Calculating distance is a function that is performed for various tiebreakers, which determines the distance from unit/tile A to unit/tile B. Distance calculation is a one-way calculation, meaning the distance from A to B is not necessarily the same as the distance from B to A. This is because distance uses the movement type of the unit related to A and factors in terrain that may hinder that movement type.
								
								<br><br>When calculating distance in this guide, it is actually saying to calculate the shortest distance. So when calculating distance from A to B, find the shortest path from A to B. When constructing these paths, forests are worth 2 tiles for infantry, while trenches are worth 3 tiles for cavalry. Untraversable tiles for unit A's movement type cannot be used in the path. The distance includes the tile that B occupies. This means that it is possible for there to be no path at all if B is on a tile that is unpathable for unit A. In that case, the distance is considered "undefined." All distances that are "undefined" are considered equal for the purpose of tiebreakers. Example of distance calculation from Mia to various enemies: 
								
								<img src="images/distance.png" alt="distance calculation diagram"></p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistorder/distance.gif">
								<p>In this example, Mia and Ike can rally Soren. Mia is 4 spaces saway from the Lance Fighter, while Ike is 5 spaces away. As such, Ike will have priority over Mia in rallying Soren due to his greater distance.</p>
							</div></div></div>
						<p class="tab2">5. Slot order: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</h3>
								<p>Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance, although in arena the enemy's deployment mirrors the player's. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map for which you info.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/post_assistorder/slotprio.gif">
								<p>In this example, Mia and Ike can both rally Soren. Both of them are equally close to the nearest enemy, so as a result Mia will have priority over Ike in rallying Soren.</p>
							</div></div></div>
					<p class="tab1">K. Best assister uses its assist on its best target from the optimal tile; clear all states except for the movement order list from Step I and return to <a href="#step2">Step II [Assess Threats]</a></p>
					
					
					
				<p class="bigger" id="step7">VII. Evaluate Movement:</p>
					<p class="tab1">NOTE: Breakable blocks are part of this step. Research on this behavior is incomplete, however. See rules below.</p>
					<p class="tab1">A. If all units with actions have "pass" status, skip to <a href="#step8">Step VIII [End Turn]</a></p>
					<p class="tab1">B. For first unit on movement order list with action and no "pass" status, if not melee with weapon, is adjacent to an ally, and is within 2 tiles from an enemy, then that unit gains the "shuffle" status.
					<p class="tab1">C. If current tile is best tile, unit gains "pass" status repeat <a href="#step7">Step VII [Evaluate Movement]</a></p>
					<p class="tab1">D. If best tile was determined from step B, unit moves to the best tile; clear all states except for the movement order list from Step I and return to <a href="#step2">Step II [Assess Threats]</a></p>
					<p class="tab1">E. For first unit on movement order list with action and no "pass" status, if it has a weapon equipped, determine enemy target using the following tiebreaks:</p>
						<p class="tab2">1. Chase priority value: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Chase Priority</h3>
								<p>This tiebreaker only exists for movement evaluation. Chase priority number is determined through the following formula:
								
								<br><br>[Potential Damage Dealt] - 5 * [Turn Range]
								
								<br><br>Potential damage dealt means the total amount of damage that can be dealt to a target, including damage that exceeds the target's HP. It also includes doubles, even a double that would normally would not occur due to the first hit killing. All in-combat passives carried by the unit and target affect this number, such as Darting Blow or Steady Breath, while in-combat effects from other units such as Spurs and Drives do not have any effect, with the exception of ally support (don't ask me why). Skills that grant in combat bonuses based on number of nearby enemies or allies, such as Flame Siegmund, Swift Mulagir, Laws of Sacae, and Wolf Berg, seem to always have their bonus active when calculating target or being assessed as a target. Skills that affect doubles such as breaker skills or Windsweep will affect doubles for calculating this number. Special activations are not taken into consideration; neither offensive nor defensive. Damage taken by the unit is also not taken into account, purely the potential damage dealt. This means whether the target could counterattack or not has no bearing on this formula.
								
								<br><br>Turn range is similar to distance calculation, but with several key differences. The main aspect of turn range is that it measures the amount of turns it takes for the unit to reach the target, which scales with the movement range of the unit. For instance, a target 6 tiles away from a melee infantry unit would have a 3 turn range. If the unit was a cavalier, then that would be a 2 turn range, while for an armor it would be a 6 turn range. Effects that alter movement range such as Armor March and Gravity do effect movement range for this calculation. Unlike for distance calculation, turn range will ignore special terrain that the target is standing on.</p>
								
								<div class="row">
								  <div class="column">
									<img src="images/turnrange_meleeinf.png" alt="melee infantry turn range diagram" style="width:50%">
								  </div>
								  <div class="column">
									<img src="images/turnrange_meleecav.png" alt="melee cavalry turn range diagram" style="width:50%">
								  </div>
								</div>
								
								
								<p>Ranged units calculate slightly differently than melee units in that they subtract 1 from the number of tiles away and get to also ignore special terrain adjacent to their target. For instance, a target 5 tiles away from a ranged infantry unit would have a 2 turn range, since 5-1=4, and 4/[2 movement range] is 2 turn range. Even if there was a mountain in front of the target, the turn range would be calculated for ranged units in this manner. Do note that while targeting can ignore adjacent terrain for ranged units, they will still move along the traversable path toward the unit. 
								
								<img src="images/turnrange_rangedinf.png" alt="ranged infantry turn range diagram">
								
								<br><br>Overall what this formula shows is that for each turn farther a target is, it needs to take 5 more damage to maintain equal value.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<div class="row">
								  <div class="column">
									<img src="videos/movetarget/chase1.gif" alt="chase priority example gif 1" style="width:50%">
								  </div>
								  <div class="column">
									<img src="videos/movetarget/chase2.gif" alt="chase priority example gif 2" style="width:50%">
								  </div>
								</div>
								<p>In example 1, Oscar can target any of the three enemies. Oscar has 12 attack, while all enemies have 1 defense. Oscar has 7 speed, while all enemies have 6 speed, so Oscar will not double. His damage dealt to each unit is as follows: 11 damage to the Lance Fighter, 9 damage to the Axe Fighter, 13 damage to the Sword Fighter. Next, we must examine his turn range from each enemy. Oscar is a melee cavalier, so he counts his turn range in increments of 3. The Lance Fighter is 6 tiles away, and thus has a 2 turn range. The Axe Fighter also is 6 tiles away for a 2 turn range. The Sword Fighter is 7 tiles away, so he has a 3 turn range. As a result, the chase priority value for each unit is as follows: 1 for the Lance Fighter (11 - 5 * 2), -1 for the Axe Fighter (9 - 5 * 2), -2 for the Sword Fighter (13 - 5 * 3). As such, the Lance Fighter has the highest chase priority value so Oscar targets and moves toward it over the other enemies.
								
								<br><br>In example 2, Oscar starts 1 space above where he is in example 1. He does the same damage to each enemy still, but the turn ranges have shifted ever so slightly. The Lance Fighter is now 5 tiles away and still has a 2 turn range. The Axe Fighter is now 7 tiles away for a 3 turn range. The Sword Fighter is now 6 tiles away, and thus now has a 2 turn range. As a result, the chase priority value for each unit is as follows: 1 for the Lance Fighter (11 - 5 * 2), -6 for the Axe Fighter (9 - 5 * 3), 3 for the Sword Fighter (13 - 5 * 2). As such, the Sword Fighter now has the highest chase priority value so Oscar targets and moves toward it instead over the Lance Fighter.</p>
							</div></div></div>
						<p class="tab2">2. Slot order: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</h3>
								<p class="tab2">Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance, although in arena the enemy's deployment mirrors the player's. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map for which you info.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/movetarget/enemyslot.gif">
								<p>In this example, Mist can target any of the three enemies. They all have identical stats, and because she has no weapon triangle advantage or disadvantage, she does the same potential damage to all of them. Since she is a infantry unit, she calculates turn range in increments of 2, and since she is a ranged unit, she can subtract 1 from her distance. As a result, all enemies are in the 3 turn range from Mist, and thus have equal chase priority value. Since the Sword Fighter has the highest slot number on this map, Mist targets and moves toward the Sword Fighter over the other two enemies.</p>
							</div></div></div>
					<p class="tab1">F. If no target was able to be determined from previous step, if all allies have a defined distance, determine ally to target using the following tiebreakers:</p>
						<p class="tab2">1. Distance: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Calculating Distance</h3>
								<p>Calculating distance is a function that is performed for various tiebreakers, which determines the distance from unit/tile A to unit/tile B. Distance calculation is a one-way calculation, meaning the distance from A to B is not necessarily the same as the distance from B to A. This is because distance uses the movement type of the unit related to A and factors in terrain that may hinder that movement type.
								
								<br><br>When calculating distance in this guide, it is actually saying to calculate the shortest distance. So when calculating distance from A to B, find the shortest path from A to B. When constructing these paths, forests are worth 2 tiles for infantry, while trenches are worth 3 tiles for cavalry. Untraversable tiles for unit A's movement type cannot be used in the path. The distance includes the tile that B occupies. This means that it is possible for there to be no path at all if B is on a tile that is unpathable for unit A. In that case, the distance is considered "undefined." All distances that are "undefined" are considered equal for the purpose of tiebreakers. Example of distance calculation from Mia to various enemies: 
								
								<img src="images/distance.png" alt="distance calculation diagram"></p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/movetarget/allydistance.gif">
								<p>In this example, Zelgius can target either Ike or Vanguard Legend Ike to target and move next to. Because Ike has a lower distance, Zelgius will target and move next to him over Vanguard Legend Ike.</p>
							</div></div></div>
						<p class="tab2">2. Slot order: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Slot Order</a></h3>
								<p class="tab2">Slot order is the final tiebreaker for most situations where the AI must choose between multiple units. The only exception is for Offensive Movement Assists, where the tile on which the potential targets are standing are examined instead. Slot order is numbered from lowest to highest going from left to right on your team.
								
								<img src="images/slotorder.png" alt="slot order example">
								
								<br><br>In the context of the tiebreaker, lower slot number will give units the edge in movement and assist priority. Higher slot number will give the unit more priority in being targeted by both allies and enemies, and also give it the edge in attack priority.

								<br><br>Enemies also have a slot order, based on the map. There is no way to tell their slot number at a glance, although in arena the enemy's deployment mirrors the player's. However, a general pattern is that Heroes have lower slot number than generic enemies in a given map. There are exceptions, of course. If you want enemy slot order info for each map, visit the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a> and search the specific map for which you info.
								
								<br><br> Reinforcements will always have a later slot number than units currently deployed. A unit that dies does not have its slot replaced; reinforcements will always use the last unoccupied slot. For instance, if there are 4 starting enemy units and a reinforcement appears on Turn 2, that reinforcement will be in the 5th slot.

								<br><br>If there are multiple reinforcements that would be deployed in the same turn, if they share same trigger (for example, two reinforcements that appear on Turn 2, or two reinforcements from killing Legion), then they will have a pre-determined arbitrary slot order based on the map. If they do not share the same trigger (for example, one reinforcement comes from killing a red mage, while another comes from killing a blue mage), then their slot order depends on their respective deploy mechanisms. If two reinforcements result from two different kill triggers like in the previous example, then their slot order is respective to the slot order of their kill trigger targets. If two reinforcements result from a kill trigger and a turn-based trigger, then the reinforcement resulting from the kill trigger will take precedence over the turn-based one for slot order.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/movetarget/allyslot.gif">
								<p>In this example, Zelgius can target either Ike or Vanguard Legend Ike to target and move next to. Because Vanguard Legend Ike has a higher slot number, Zelgius will target and move next to him over Ike.</p>
							</div></div></div>
					<p class="tab1">G. If unit has "shuffle" status, determine best tile to move to using the following tiebreaks: (glossary and examples under construction)</p>
						<p class="tab2">1. Standing still: N > Y
						<br>2. Distance to target: lowest #
						<br>3. Defense tile: Y > N
						<br>4. Enemy threat: lowest #
						<br>5. Requires teleportation: Y > N
						<br>6. Special terrain: Flier Terrain > Forest > Trench > Regular
						<br>7. Tile priority value: highest #</p>
					<p class="tab1">H. Determine best tile to move to using the following tiebreaks: (SPECIAL NOTE: if enemy cannot be pathed to, unit paths toward first adjacent tile according to tile priority if melee. If ranged, unit first checks for adjacent tiles, then tiles tiles up to 1 space away, according to tile priority. This only applies to chasing enemies.)<p>
						<p class="tab2">1. Distance from target: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Calculating Distance</h3>
								<p>Calculating distance is a function that is performed for various tiebreakers, which determines the distance from unit/tile A to unit/tile B. Distance calculation is a one-way calculation, meaning the distance from A to B is not necessarily the same as the distance from B to A. This is because distance uses the movement type of the unit related to A and factors in terrain that may hinder that movement type.
								
								<br><br>When calculating distance in this guide, it is actually saying to calculate the shortest distance. So when calculating distance from A to B, find the shortest path from A to B. When constructing these paths, forests are worth 2 tiles for infantry, while trenches are worth 3 tiles for cavalry. Untraversable tiles for unit A's movement type cannot be used in the path. The distance includes the tile that B occupies. This means that it is possible for there to be no path at all if B is on a tile that is unpathable for unit A. In that case, the distance is considered "undefined." All distances that are "undefined" are considered equal for the purpose of tiebreakers. Example of distance calculation from Mia to various enemies: 
								
								<img src="images/distance.png" alt="distance calculation diagram"></p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/movepos/distance.gif">
								<p>In this example, Mia is chasing the Axe Fighter. She will move down 2, because that is the tile from her available moves which is closest to the Axe Fighter. Very straight forward.</p>
							</div></div></div>
						<p class="tab2">2. Defense tile: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Defense Tiles</h3>
								<p>Assuming all else is equal, defense tiles have priority over tiles without defense tiles when choosing position.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/movepos/deftile.gif">
								<p>In this example, Titania is chasing the Blue Mage. She can move either 1 right and 2 up, or 2 right and 1 up to get to a tile closest to the Blue Mage. Because the tile that is 2 right and 1 up is a defense tile, it will have priority over the other tile.</p>
							</div></div></div>
						<p class="tab2">3. Enemy threat: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Enemy Threat</h3>
								<p>Assuming all else is equal, a tile with less enemy threat has priority over other tiles with more enemy threat. A tile is considered threatened by an enemy if it is in range of the combination of an enemy's movement+attack ranges. It is expressed this way because movement range is stored at the beginning of the turn, so if movement range were to change in the middle of the turn (e.g. Gravity staff), it would still calculate using the movement range stored at the beginning of the turn. It is also expressed this way because terrain movement limitations like walls and trees do affect which tiles can be threatened by an enemy, but transient limitations like breakable blocks, other units blocking certain tiles, or tiles blocked by obstruct have no affect. To a similar effect, enemy threat also does not seem to consider tiles that can only be threatened through a teleportation skill, because those tiles are not within the movement+attack range combination.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/movepos/enemythreat.gif">
								<p>In this example, Nephenee is chasing the Sword Fighter. She could move up 2, or move up 1 right 1. Because there are two enemies that can attack the upper tile but only one enemy that can attack the upper right tile, Nephenee will prefer to move to the upper right tile.</p>
							</div></div></div>
						<p class="tab2">4. Requires teleportation: Y > N</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Teleportation</h3>
								<p>Assuming all else is equal, a tile that requires a teleportation to reach has priority over tiles that can be reached with standard movement. In game, these tiles are visually denoted as a lighter shade of blue when you are manually making a move. If a tile could be reached by both teleportation and by using Pivot, it is still considered a tile that requires teleportation, and Pivot will not be used if that tile is selected.
								
								<img src="images/teleportation.png" alt="teleportation tile diagram">
								
								<br>This is a table of sources of teleportation:</p>
								<table class="tab2">
									<tr>
										<th>Weapons:</th>
										<td class="left">
											<table>
												<tr>
													<td>Hinoka's Spear (Special Refine)</td>
													<td>Nóatún</td>
												</tr>
												<tr>
													<td>Grimoire</td>
													<td>Fruit of Iðunn</td>
												</tr>
												<tr>
													<td>Fujin Yumi (Special Refine)</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Passives:</th>
										<td class="left">
											<table>
												<tr>
													<td>Wings of Mercy 1/2/3</td>
													<td>Escape Route 1/2/3</td>
													<td>Flier Formation 1/2/3</td>
												</tr>
												<tr>
													<td>Aerobatics 1/2/3</td>
													<td>Guidance 1/2/3</td>
													<td>Flier Guidance 1/2/3</td>
												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<th>Other</th>
										<td class="left">
											<ul>
												<li>Rival Domains/Grand Conquest warp tiles</li>
												<li>Grand Conquest bonus Guidance effect</li>
											</ul>
										</td>
									</tr>
								</table>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/movepos/teleport.gif">
								<p>In this example, Zelgius is chasing the Axe Fighter. He could move to the right, down, or teleport to the right of Micaiah with Warp Powder to reach tiles that are closest to the Axe Fighter. Tiles that require teleportation to reach have higher priority than tiles that can be accessed through regular movement, so Zelgius will warp next to Micaiah.</p>
							</div></div></div>
						<p class="tab2">5. Tiles from diagonal to target: lowest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Diagonal</h3>
								<p>This tiebreaker only exists for standard movement. Assuming all else is equal, a tile that is closer to any diagonal to the chase target has priority over other tiles. Being directly diagonal from the target has the highest priority. Distance from the diagonal is measured in absolute number of spaces away, so movement type and obstacles are not factored in.
								<img src="images/diagonal.png"></p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/movepos/diagonal.gif">
								<p>In this example, Mia is chasing the Axe Fighter. She can move right 2 or right 1 down 1 to reach tiles that are closest to the Axe Fighter. Since the tile that is to her right is closer to a diagonal from the Axe Fighter (resting exactly on the upper left diagonal in this case), that tile will have priority over the lower right one.</p>
							</div></div></div>
						<p class="tab2">6. Special terrain: Flier Terrain > Forest > Trench > Regular</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Terrain</h3>
								<p>Assuming all else is equal, a tile with more prohibitive terrain has priority over other tiles. The hierarchy of special terrains is: flier terrain > forest > trench > regular. Flier terrain is any terrain that can only be accessed by flying units, whether it be water, mountains, lava, abyss, etc. Forests hinder infantry and prohibit cavalry, so they are next. Trenches only hinder cavalry, so they are the least prohibitive special terrain. Regular tiles have the least priority, of course.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/movepos/terrain.gif">
								<p>In this example, Zelgius is chasing the Axe Fighter. He can move up 1 right 1, or right 2 to reach tiles that are closest to the Axe Fighter. Both tiles are equally close to the upper left diagonal to the Axe Fighter. Since the tile to the right of Zelgius has a forest tile, it will have priority over the regular tile to his upper right.</p>
							</div></div></div>
						<p class="tab2">7. Movement required: lowest # (non-shuffle status only)</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Movement</h3>
								<p>Assuming all else is equal, a tile that requires the lowest amount of movement to reach has priority over other tiles. The only time this is not true is for standard movement if the unit has the "shuffle" status.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<img src="videos/movepos/movement.gif">
								<p>In this example, Mia is chasing the Lance Fighter. She could move right 2, or right 1 down 1 to reach tiles that are closest to the Lance Fighter besides the one she is already standing on. The tile she is standing on as well as the tile to the right are both equally close to the lower left and lower right diagonals of the Lance Fighter respectively. Since the tile she is standing on requires the lowest movement, she will prefer to stay still and pass her move to an ally than move to the right.</p>
							</div></div></div>
						<p class="tab2">8. Tile priority value: highest #</p>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Glossary" onclick="this.value=this.value=='Show Glossary'?'Hide Glossary':'Show Glossary';">
							<div class="spoiler"><div>
								<h3>Tile Priority</h3>
								<p class="tab2">Assuming all else is equal, a tile with the highest tile priority number has priority over other tiles. More about tile priority can be read in <a href="#section1b">Section 1b</a>.</p>
							</div></div></div>
						<div class="tab3"><input class="spoilerbutton" type="button" value="Show Example" onclick="this.value=this.value=='Show Example'?'Hide Example':'Show Example';">
							<div class="spoiler"><div>
								<div class="row">
								  <div class="column">
									<img src="videos/movepos/tileprio1.gif" alt="tile priority example gif 1" style="width:50%">
								  </div>
								  <div class="column">
									<img src="videos/movepos/tileprio2.gif" alt="tile priority example gif 2" style="width:50%">
								  </div>
								</div>
								<p>In example 1, Mia is chasing Veronica. She can move to the upper left tile or the upper right tile. According to the tile priority hierarchy, up > right > left > down, and as such the upper right tile has higher priority than the upper right.
								
								<br><br>In example 2, Mia is still chasing Veronica. She can move to the upper left tile or the lower left tile. According to the tile priority hierarchy referenced in example 1, the upper left tile has higher priority than the lower left, and thus Mia will move right 1 down 1.</p>
							</div></div></div>
					<p class="tab1">I. If current tile is the best tile, or if unit was otherwise unable to determine a best tile, unit gains "pass" status; repeat <a href="#step7">Step VII [Evaluate Movement]</a></p>
					<p class="tab1">J. Unit moves to the best tile; clear all states except for the movement order list from Step I and return to <a href="#step2">Step II [Assess Threats]</a></p>
					
					
					
				<p class="bigger" id="step8">VIII. End Turn</p>
				
				
				
				<br><br><br><p class="bigger">BLOCK BREAKING RULES (RESEARCH STILL IN PROGRESS)</p>
					<p class="tab1">As far as place in the turn order, breaking blocks is just an alternate form of movement. So like regular movement, a unit will only break a block if there is no relevant assist to perform, and no attacks that can be made. A unit may or may not break a block, depending on where the block is in relation to the area between the unit and its target. A unit that breaks a block will not have movement priority over one that simply moves; they will adhere to the movement order list. If a unit is able to and does choose to break a block, it will first choose which block it will break before choosing which tile to stand on in order to break said block, possibly resulting in being farther from the target than when doing it in reverse.
					<br><br>Melee unit behavior:</p>
						<p class="tab2">Potential blocks: To be considered a potential block, it must be within the rectangular area between the unit and its target or be along a viable shortest path that deviates from said rectangle. Excludes blocks within max movement range along shortest paths (i.e. blocks within 3 spaces for a horse), which scales with obstacles that may prevent moving the maximum range along shortest paths (i.e. an ally unit clogging a narrow corridor 3 spaces away, or a breakable block in a corridor 2 tiles in front of a horse). A melee unit will always try to move to a tile in range that is closest to the target. If there exists a potential block that can be attacked from a tile that is closest to the target, that block is a candidate to be broken. If there are no potential blocks that could be attacked from a tile that is closest to the target, then the unit will make a regular move to one of those tiles without breaking a block. 
						<br><br>If there are multiple potential blocks that could be broken from tiles that are closest to the target, the pattern for determining which block is broken is currently not fully clear. One known tiebreaker is one which can be broken with lower enemy threat. Another tiebreaker is one which can be broken with lower enemy threat, if the block was treated as a solid wall.
						<br><br> Tiebreakers for tile selection for blocks are the same as for attacking</p>
					<p class="tab1">Ranged unit behavior:</p>
					<p class="tab2">Potential blocks: Unlike melee units, ranged units do not simple prioritize moving to a tile in range that is closest to the target. The general behavior is to select a potential block that is [max movement - 1 + break]. This assumes that the unit has the ability to make max movement. If unit cannot move closer to its target, the unit may make negative movement to break a potential block. More specific behaviors for selecting potential blocks will be split based on movement range, in order of complexity. 
					<br><br>1 movement:
						<br><br>If there exists potential blocks within attack range, a 1 movement ranged unit will, as stated by the general behavior above, ideally not move at all and break a potential block 2 spaces away, assuming the unit could move along a shortest path at all. If such a potential block does not exist, then it will next prefer to move 1 space along a shortest path, and break a block. If no potential block has become a candidate block at this point, then there were never any potential blocks in range to begin with; 1 movement units will always attack a potential block that is in range.
						<br><br>2 movement: 
						<br><Br>If there exists potential blocks within attack range, a 2 movement ranged unit will, as stated by the general behavior above, USUALLY (~95% certainty) move 1 space and break a potential block 3 spaces away (from starting position), again assuming the unit could use its maximum movement along a shortest path. If the unit can only use 1 movement along a shortest path, refer to the 1 movement section above. If the unit cannot perform the usual behavior of [max movement - 1 + break], it will secondarily prefer to use [max movement + break], thus move 2 and break a potential block 4 spaces away. If such a block does not exist, the unit will finally prefer to move to a tile that is closest to the target [max movement]. A 2 move ranged unit who is able to move 2 spaces on a shortest path will never move 0 spaces to break a potential block, unlike 1 movement ranged units.
						<br><br>3 movement:
						<br><br>If there exists potential blocks within attack range, a 3 movement ranged unit will, as stated by the general behavior above, USUALLY (~95% certainty) move 2 spaces and break a potential block 4 spaces away (from starting position), again assuming the unit could use its maximum movement along a shortest path. If the unit can only use 2 movement along a shortest path, refer to the 2 movement section above. If the unit cannot perform the usual behavior of [max movement - 1 + break], it will secondarily prefer to use [max movement + break], thus move 3 and break a potential block 5 spaces away. If such a block does not exist, the unit will finally prefer to move to a tile that is closest to the target [max movement]. A 3 move ranged unit who is able to move 3 spaces on a shortest path will never move 0 or 1 spaces to break a potential block. 
						<br><br>If there are multiple potential blocks of the ranged unit's highest preference, the pattern for determining which block is broken is currently UNCLEAR.
						<br><br>Tiebreakers for tile selection for blocks are the same as for attacking
						<br><br>Tiebreakers for tile selection for blocks are the same as for attacking
						<br><br>Curiously, on certain maps, some or all units will treat breakable blocks as solid walls and will walk around them instead of attacking them. You can check the AI behavior regarding breakable blocks for each map on the <a href="https://feheroes.gamepedia.com/Main_Page">FEH Wiki</a>.</p>
				
				
				
				<br><br><br><p class="bigger">SPECIAL RIVAL DOMAINS/GRAND CONQUEST RULES (RESEARCH STILL IN PROGRESS)</p>
					<p class="tab1">-Attacking enemy camps and fortress have higher priority than attacking any enemy for both targeting and order
					<br>-Moving to an unoccupied ally camp or fortress has the same priority level as a post-combat assist: dance > restore > heal > move to fort > rally > movement assist
					<br>-When choosing an attack target, the first tiebreak (Win/Draw/Loss) is not considered
					<br>-Units occupying a camp or fortress will not be targeted for movement assists</p>

			</main>
		</body>
	</html>
	
	<script>
		var shukumei = new Audio('shukumei.wav');
		shukumei.volume = 0.3;
	</script>